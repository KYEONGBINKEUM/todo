(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[204],{4366:function(e,t,r){Promise.resolve().then(r.bind(r,3292))},3292:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return x}});var s=r(6717),a=r(7387),n=r(8519),o=r(1097),l=r(9936),i=r(6813),d=r(1730);function c(e){let t={urgent:{bg:"bg-red-500/20",text:"text-red-400",border:"border-red-500/30"},high:{bg:"bg-orange-500/20",text:"text-orange-400",border:"border-orange-500/30"},medium:{bg:"bg-yellow-500/20",text:"text-yellow-400",border:"border-yellow-500/30"},low:{bg:"bg-blue-500/20",text:"text-blue-400",border:"border-blue-500/30"}};return t[e]||t.medium}function x(){let{user:e}=(0,o.a)(),{t}=(0,l.QT)(),r=(0,n.useRouter)(),{tasks:x,lists:u,notes:m,mindmaps:p,loading:b}=(0,d.a)(),h=x.filter(e=>e.starred),f=m.filter(e=>e.starred),g=p.filter(e=>e.starred),j=h.length+f.length+g.length,[y,N]=(0,a.useState)([]),[v,k]=(0,a.useState)(""),[D,w]=(0,a.useState)("medium"),[C,_]=(0,a.useState)(""),[S,E]=(0,a.useState)(!1),[P,I]=(0,a.useState)(!0);(0,a.useEffect)(()=>{u.length>0&&(N(u),C||_(u[0].id))},[u]);let J=async()=>{if(!v.trim()||!e||S)return;E(!0);let t=v.trim();k("");try{var r;await (0,i.gI)(e.uid,{title:t,status:"todo",priority:D,starred:!0,listId:C||(null===(r=y[0])||void 0===r?void 0:r.id)||"",myDay:!1,tags:[]})}catch(e){}finally{E(!1)}},O=async t=>{if(!e||!t.id)return;let r="completed"===t.status?"todo":"completed";await (0,i.xJ)(e.uid,t.id,{status:r})},R=async t=>{e&&t.id&&await (0,i.xJ)(e.uid,t.id,{starred:!1})},U=async t=>{e&&t.id&&await (0,i.Qk)(e.uid,t.id,{starred:!1})},z=async t=>{e&&t.id&&await (0,i.mb)(e.uid,t.id,{starred:!1})},L=e=>y.find(t=>t.id===e)||{label:"Tasks",color:"#e94560"};return b?(0,s.jsx)("div",{className:"p-8 flex items-center justify-center min-h-[50vh]",children:(0,s.jsx)("div",{className:"w-6 h-6 border-2 border-[#e94560] border-t-transparent rounded-full animate-spin"})}):(0,s.jsx)("div",{className:"p-4 md:p-8",children:(0,s.jsxs)("div",{className:"max-w-3xl mx-auto",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,s.jsx)("span",{className:"text-3xl",children:"⭐"}),(0,s.jsx)("h2",{className:"text-3xl font-extrabold text-text-primary",children:t("important.title")}),(0,s.jsx)("span",{className:"text-sm text-text-muted ml-2",children:j})]}),(0,s.jsx)("p",{className:"text-text-secondary text-sm",children:t("important.desc")})]}),(0,s.jsxs)("div",{className:"mb-6 flex gap-2",children:[(0,s.jsxs)("div",{className:"flex-1 flex bg-background-card border border-border rounded-xl overflow-hidden focus-within:border-[#e94560] transition-colors",children:[(0,s.jsx)("input",{type:"text",value:v,onChange:e=>k(e.target.value),onKeyDown:e=>"Enter"===e.key&&J(),placeholder:t("myDay.addTask"),className:"flex-1 px-4 py-3 bg-transparent text-text-primary placeholder-text-muted text-sm focus:outline-none"}),(0,s.jsxs)("select",{value:D,onChange:e=>w(e.target.value),className:"px-2 bg-transparent text-xs border-l border-border focus:outline-none cursor-pointer text-text-secondary",children:[(0,s.jsx)("option",{value:"urgent",className:"bg-background-card",children:t("priority.urgent")}),(0,s.jsx)("option",{value:"high",className:"bg-background-card",children:t("priority.high")}),(0,s.jsx)("option",{value:"medium",className:"bg-background-card",children:t("priority.medium")}),(0,s.jsx)("option",{value:"low",className:"bg-background-card",children:t("priority.low")})]}),(0,s.jsx)("select",{value:C,onChange:e=>_(e.target.value),className:"px-2 bg-transparent text-text-secondary text-xs border-l border-border focus:outline-none cursor-pointer",children:y.map(e=>(0,s.jsx)("option",{value:e.id,className:"bg-background-card",children:e.label},e.id))})]}),(0,s.jsx)("button",{onClick:J,disabled:S,className:"px-5 py-3 bg-[#e94560] hover:bg-[#ff5a7a] text-white font-semibold rounded-xl text-sm transition-colors disabled:opacity-50",children:S?"...":t("common.add")})]}),h.length>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,s.jsx)("span",{className:"text-base",children:"\uD83D\uDCCB"}),(0,s.jsx)("span",{className:"text-sm font-bold text-text-primary",children:t("nav.tasks")}),(0,s.jsx)("span",{className:"text-[10px] bg-border px-2 py-0.5 rounded-full text-text-muted",children:h.filter(e=>"completed"!==e.status).length})]}),(0,s.jsx)("div",{className:"space-y-2 mb-6",children:h.filter(e=>"completed"!==e.status).map((e,r)=>{let a=c(e.priority),n=L(e.listId);return(0,s.jsxs)("div",{className:"group flex items-center gap-3 p-4 bg-background-card border border-border rounded-xl hover:border-border-hover transition-all",style:{animation:"fadeUp 0.4s ease-out both",animationDelay:"".concat(.05*r,"s")},children:[(0,s.jsx)("button",{onClick:()=>O(e),className:"w-6 h-6 rounded-md border-2 flex items-center justify-center transition-all duration-300 flex-shrink-0 hover:border-[#e94560] hover:shadow-[0_0_8px_rgba(233,69,96,0.3)]",style:{borderColor:"var(--color-checkbox-border)"}}),(0,s.jsx)("span",{className:"w-1.5 h-8 rounded-full flex-shrink-0",style:{backgroundColor:n.color}}),(0,s.jsx)("span",{className:"flex-1 text-sm text-text-primary",children:e.title}),e.dueDate&&(0,s.jsxs)("span",{className:"text-[10px] text-text-muted",children:["\uD83D\uDCC5 ",e.dueDate.slice(5).replace("-","/")]}),(0,s.jsx)("span",{className:"text-[10px] px-2 py-0.5 rounded-full border",style:{color:n.color,borderColor:"".concat(n.color,"40"),backgroundColor:"".concat(n.color,"10")},children:n.label}),(0,s.jsx)("span",{className:"px-2 py-0.5 rounded text-[10px] font-semibold border ".concat(a.bg," ").concat(a.text," ").concat(a.border),children:t("priority.".concat(e.priority))}),(0,s.jsx)("button",{onClick:()=>R(e),className:"text-lg text-amber-400 drop-shadow-[0_0_4px_rgba(251,191,36,0.5)] hover:text-amber-300 transition-all flex-shrink-0",title:t("important.unstar"),children:"★"})]},e.id)})}),h.filter(e=>"completed"===e.status).length>0&&(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsxs)("button",{onClick:()=>I(!P),className:"flex items-center gap-2 text-text-muted text-sm mb-3 hover:text-text-secondary transition-colors w-full",children:[(0,s.jsx)("span",{className:"transition-transform duration-200 text-xs ".concat(P?"rotate-90":""),children:"▶"}),(0,s.jsx)("span",{className:"font-semibold",children:t("status.completed")}),(0,s.jsx)("span",{className:"text-[10px] bg-border px-2 py-0.5 rounded-full",children:h.filter(e=>"completed"===e.status).length})]}),P&&(0,s.jsx)("div",{className:"space-y-2",children:h.filter(e=>"completed"===e.status).map((e,r)=>{let a=c(e.priority),n=L(e.listId);return(0,s.jsxs)("div",{className:"group flex items-center gap-3 p-4 bg-background-card border border-border/50 rounded-xl opacity-60 hover:opacity-80 transition-all",style:{animation:"fadeUp 0.3s ease-out both",animationDelay:"".concat(.03*r,"s")},children:[(0,s.jsx)("button",{onClick:()=>O(e),className:"w-6 h-6 rounded-md border-2 flex items-center justify-center transition-all duration-300 flex-shrink-0 bg-gradient-to-br from-[#e94560] to-[#533483] border-transparent",children:(0,s.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",children:(0,s.jsx)("path",{d:"M3 7L6 10L11 4",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),(0,s.jsx)("span",{className:"w-1.5 h-8 rounded-full flex-shrink-0",style:{backgroundColor:n.color}}),(0,s.jsx)("span",{className:"flex-1 text-sm line-through text-text-inactive",children:e.title}),e.dueDate&&(0,s.jsxs)("span",{className:"text-[10px] text-text-muted",children:["\uD83D\uDCC5 ",e.dueDate.slice(5).replace("-","/")]}),(0,s.jsx)("span",{className:"text-[10px] px-2 py-0.5 rounded-full border",style:{color:n.color,borderColor:"".concat(n.color,"40"),backgroundColor:"".concat(n.color,"10")},children:n.label}),(0,s.jsx)("span",{className:"px-2 py-0.5 rounded text-[10px] font-semibold border ".concat(a.bg," ").concat(a.text," ").concat(a.border),children:t("priority.".concat(e.priority))})]},e.id)})})]})]}),f.length>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-3 mt-4",children:[(0,s.jsx)("span",{className:"text-base",children:"\uD83D\uDCDD"}),(0,s.jsx)("span",{className:"text-sm font-bold text-text-primary",children:t("nav.notes")}),(0,s.jsx)("span",{className:"text-[10px] bg-border px-2 py-0.5 rounded-full text-text-muted",children:f.length})]}),(0,s.jsx)("div",{className:"space-y-2 mb-6",children:f.map((e,a)=>{let n=(e.blocks||[]).filter(e=>"divider"!==e.type&&e.content).slice(0,1).map(e=>e.content).join("");return(0,s.jsxs)("div",{className:"group flex items-center gap-3 p-4 bg-background-card border border-border rounded-xl hover:border-border-hover transition-all cursor-pointer",style:{animation:"fadeUp 0.4s ease-out both",animationDelay:"".concat(.05*a,"s")},onClick:()=>r.push("/notes?note=".concat(e.id)),children:[(0,s.jsx)("span",{className:"text-lg flex-shrink-0",children:e.icon||"\uD83D\uDCDD"}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("p",{className:"text-sm font-semibold text-text-primary truncate",children:e.title||"제목 없음"}),n&&(0,s.jsx)("p",{className:"text-[11px] text-text-inactive truncate",children:n})]}),(0,s.jsx)("button",{onClick:t=>{t.stopPropagation(),U(e)},className:"text-lg text-amber-400 drop-shadow-[0_0_4px_rgba(251,191,36,0.5)] hover:text-amber-300 transition-all flex-shrink-0",title:t("important.unstar"),children:"★"})]},e.id)})})]}),g.length>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-3 mt-4",children:[(0,s.jsx)("span",{className:"text-base",children:"\uD83E\uDDE0"}),(0,s.jsx)("span",{className:"text-sm font-bold text-text-primary",children:t("nav.mindmap")}),(0,s.jsx)("span",{className:"text-[10px] bg-border px-2 py-0.5 rounded-full text-text-muted",children:g.length})]}),(0,s.jsx)("div",{className:"space-y-2 mb-6",children:g.map((e,a)=>(0,s.jsxs)("div",{className:"group flex items-center gap-3 p-4 bg-background-card border border-border rounded-xl hover:border-border-hover transition-all cursor-pointer",style:{animation:"fadeUp 0.4s ease-out both",animationDelay:"".concat(.05*a,"s")},onClick:()=>r.push("/mindmap"),children:[(0,s.jsx)("span",{className:"text-lg flex-shrink-0",children:"\uD83E\uDDE0"}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("p",{className:"text-sm font-semibold text-text-primary truncate",children:e.title||"제목 없음"}),(0,s.jsxs)("p",{className:"text-[11px] text-text-inactive",children:[(e.nodes||[]).length," nodes"]})]}),(0,s.jsx)("button",{onClick:t=>{t.stopPropagation(),z(e)},className:"text-lg text-amber-400 drop-shadow-[0_0_4px_rgba(251,191,36,0.5)] hover:text-amber-300 transition-all flex-shrink-0",title:t("important.unstar"),children:"★"})]},e.id))})]}),0===j&&(0,s.jsxs)("div",{className:"text-center py-16",children:[(0,s.jsx)("div",{className:"text-5xl mb-4",children:"⭐"}),(0,s.jsx)("p",{className:"text-text-secondary font-semibold",children:t("important.empty")}),(0,s.jsx)("p",{className:"text-text-muted text-sm mt-1",children:t("important.emptyHint")})]})]})})}},1730:function(e,t,r){"use strict";r.d(t,{P:function(){return c},a:function(){return x}});var s=r(6717),a=r(7387),n=r(7253),o=r(1579),l=r(1097);let i=(0,a.createContext)({tasks:[],lists:[],notes:[],folders:[],mindmaps:[],loading:!0,storageUsed:0});function d(e){return new Blob([e]).size}function c(e){let{children:t}=e,{user:r,loading:c}=(0,l.a)(),[x,u]=(0,a.useState)([]),[m,p]=(0,a.useState)([]),[b,h]=(0,a.useState)([]),[f,g]=(0,a.useState)([]),[j,y]=(0,a.useState)([]),[N,v]=(0,a.useState)(!0),k=(0,a.useRef)([]);(0,a.useEffect)(()=>{if(c)return;if(k.current.forEach(e=>e()),k.current=[],!r){u([]),p([]),h([]),g([]),y([]),v(!1);return}v(!0);let e=r.uid,t=0,s=()=>{++t>=5&&v(!1)},a=(0,n.cf)((0,n.IO)((0,n.hJ)(o.db,"users",e,"tasks"),(0,n.Xo)("createdAt","desc")),e=>{u(e.docs.map(e=>({id:e.id,...e.data()}))),s()},()=>s()),l=(0,n.cf)((0,n.hJ)(o.db,"users",e,"lists"),e=>{p(e.docs.map(e=>({id:e.id,...e.data()}))),s()},()=>s()),i=(0,n.cf)((0,n.IO)((0,n.hJ)(o.db,"users",e,"notes"),(0,n.Xo)("createdAt","desc")),e=>{h(e.docs.map(e=>({id:e.id,...e.data()}))),s()},()=>s()),d=(0,n.cf)((0,n.hJ)(o.db,"users",e,"folders"),e=>{g(e.docs.map(e=>({id:e.id,...e.data()}))),s()},()=>s()),x=(0,n.cf)((0,n.IO)((0,n.hJ)(o.db,"users",e,"mindmaps"),(0,n.Xo)("createdAt","desc")),e=>{y(e.docs.map(e=>({id:e.id,...e.data()}))),s()},()=>s());return k.current=[a,l,i,d,x],()=>{k.current.forEach(e=>e()),k.current=[]}},[r,c]);let D=function(e,t,r){var s,a,n,o;let l=0;for(let t of e){for(let e of(l+=d(t.title||"")+d(t.memo||""),null!==(s=t.subTasks)&&void 0!==s?s:[]))l+=d(e.title||"");for(let e of null!==(a=t.attachments)&&void 0!==a?a:[])l+=e.size}for(let e of t)for(let t of(l+=d(e.title||""),null!==(n=e.blocks)&&void 0!==n?n:[]))l+=d(t.content||"")+d(t.children||"");for(let e of r)for(let t of(l+=d(e.title||""),null!==(o=e.nodes)&&void 0!==o?o:[]))l+=d(t.text||""),t.imageSize&&(l+=t.imageSize);return l}(x,b,j);return(0,s.jsx)(i.Provider,{value:{tasks:x,lists:m,notes:b,folders:f,mindmaps:j,loading:N,storageUsed:D},children:t})}function x(){return(0,a.useContext)(i)}},8519:function(e,t,r){"use strict";var s=r(5878);r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})}},function(e){e.O(0,[815,419,412,936,407,809,744],function(){return e(e.s=4366)}),_N_E=e.O()}]);