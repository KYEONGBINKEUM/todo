(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[642],{3770:function(e,t,s){Promise.resolve().then(s.bind(s,8397))},8397:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return N}});var a=s(7573),r=s(7653),l=s(1695),n=s(4193),i=s(6340),d=s.n(i),c=s(8574),o=s(9937),x=s(6921),u=s(2052);function m(e){document.documentElement.setAttribute("data-font",e)}let h=[{code:"ko",name:"한국어",flag:"\uD83C\uDDF0\uD83C\uDDF7"},{code:"en",name:"English",flag:"\uD83C\uDDFA\uD83C\uDDF8"},{code:"ja",name:"日本語",flag:"\uD83C\uDDEF\uD83C\uDDF5"},{code:"es",name:"Espa\xf1ol",flag:"\uD83C\uDDEA\uD83C\uDDF8"},{code:"pt",name:"Portugu\xeas",flag:"\uD83C\uDDE7\uD83C\uDDF7"},{code:"fr",name:"Fran\xe7ais",flag:"\uD83C\uDDEB\uD83C\uDDF7"}],f=[{value:"free",label:"Free",desc:"기본 기능 무제한",color:"#64748b"},{value:"pro",label:"Pro",desc:"AI + 광고 제거 + 10GB",color:"#e94560"},{value:"team",label:"Team",desc:"무제한 협업 + 관리자 기능",color:"#8b5cf6"}];function b(e){var t,s,l,i,d,u;let{onClose:b}=e,{user:p}=(0,n.a)(),{theme:v,setTheme:g}=(0,c.F)(),{t:j,language:N,setLanguage:y}=(0,o.QT)(),[k,D]=(0,r.useState)("account"),[w,C]=(0,r.useState)("medium"),[S,E]=(0,r.useState)("free"),[A,F]=(0,r.useState)(!1);(0,r.useEffect)(()=>{p&&(0,x.nS)(p.uid).then(e=>{var t;let s=null!==(t=e.fontSize)&&void 0!==t?t:"medium";C(s),m(s),E(e.plan||"free"),F(e.isAdmin||!1)})},[p]);let P=e=>{C(e),m(e),p&&(0,x.d2)(p.uid,{fontSize:e})},L=e=>{y(e)},T=e=>{E(e),p&&(0,x.d2)(p.uid,{plan:e})},_=[{id:"account",label:j("settings.account"),icon:"\uD83D\uDC64"},{id:"display",label:j("settings.display"),icon:"\uD83C\uDFA8"},{id:"language",label:j("settings.language"),icon:"\uD83C\uDF10"},{id:"info",label:j("settings.info"),icon:"ℹ️"}];return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"fixed inset-0 z-50 bg-black/50 backdrop-blur-sm",onClick:b}),(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"w-full max-w-lg bg-background-card border border-border rounded-2xl shadow-2xl overflow-hidden",onClick:e=>e.stopPropagation(),style:{animation:"fadeUp 0.2s ease-out"},children:[(0,a.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b border-border",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-lg",children:"⚙️"}),(0,a.jsx)("h2",{className:"text-base font-bold text-text-primary",children:j("settings.title")})]}),(0,a.jsx)("button",{onClick:b,className:"w-8 h-8 flex items-center justify-center rounded-lg text-text-muted hover:text-text-primary hover:bg-border transition-colors",children:(0,a.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",children:(0,a.jsx)("path",{d:"M1 1L13 13M13 1L1 13",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})})})]}),(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("div",{className:"w-32 border-r border-border py-4 flex-shrink-0",children:_.map(e=>(0,a.jsxs)("button",{onClick:()=>D(e.id),className:"w-full text-left px-4 py-2.5 text-xs font-semibold flex items-center gap-2 transition-colors ".concat(k===e.id?"text-[#e94560] bg-[#e94560]/10":"text-text-secondary hover:text-text-primary hover:bg-border/30"),children:[(0,a.jsx)("span",{children:e.icon}),e.label]},e.id))}),(0,a.jsxs)("div",{className:"flex-1 p-6 overflow-y-auto max-h-[60vh]",children:["account"===k&&(0,a.jsxs)("div",{className:"space-y-5",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-[10px] text-text-muted uppercase tracking-wider font-semibold mb-3",children:j("settings.profile")}),(0,a.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-background rounded-xl border border-border",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-[#e94560] to-[#533483] flex items-center justify-center text-white font-bold text-sm flex-shrink-0",children:null!==(u=null==p?void 0:null===(s=p.email)||void 0===s?void 0:null===(t=s[0])||void 0===t?void 0:t.toUpperCase())&&void 0!==u?u:"?"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-sm font-semibold text-text-primary truncate",children:(null==p?void 0:p.displayName)||"사용자"}),(0,a.jsx)("p",{className:"text-xs text-text-muted truncate",children:null==p?void 0:p.email})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-[10px] text-text-muted uppercase tracking-wider font-semibold mb-3",children:j("settings.plan")}),(0,a.jsxs)("div",{className:"p-4 bg-background rounded-xl border border-border",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("span",{className:"text-xs font-bold text-text-primary",children:["free"===S?"Free":"pro"===S?"Pro":"Team"," 플랜"]}),(0,a.jsx)("p",{className:"text-[11px] text-text-muted mt-0.5",children:null===(l=f.find(e=>e.value===S))||void 0===l?void 0:l.desc})]}),(0,a.jsx)("span",{className:"px-2 py-0.5 rounded-full text-[10px] font-bold",style:{color:null===(i=f.find(e=>e.value===S))||void 0===i?void 0:i.color,backgroundColor:"".concat(null===(d=f.find(e=>e.value===S))||void 0===d?void 0:d.color,"20")},children:j("settings.currentPlan")})]}),(0,a.jsx)("div",{className:"space-y-1.5 mb-4",children:[{label:"할일 목록 관리",included:!0},{label:"노트 작성",included:!0},{label:"기기 동기화",included:!0},{label:"AI 자동 작성/요약",included:"free"!==S},{label:"광고 제거",included:"free"!==S},{label:"무제한 공유 협업",included:"team"===S},{label:"파일 스토리지 10GB",included:"free"!==S}].map(e=>(0,a.jsxs)("div",{className:"flex items-center gap-2 text-[11px]",children:[(0,a.jsx)("span",{className:e.included?"text-[#22c55e]":"text-text-inactive",children:e.included?"✓":"–"}),(0,a.jsx)("span",{className:e.included?"text-text-secondary":"text-text-inactive",children:e.label})]},e.label))}),A&&(0,a.jsxs)("div",{className:"mb-3 p-3 bg-amber-500/5 border border-amber-500/20 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)("span",{className:"text-xs",children:"\uD83D\uDD27"}),(0,a.jsx)("span",{className:"text-[10px] font-bold text-amber-500 uppercase tracking-wider",children:"관리자 전용"})]}),(0,a.jsx)("div",{className:"grid grid-cols-3 gap-2",children:f.map(e=>(0,a.jsxs)("button",{onClick:()=>T(e.value),className:"p-2 rounded-lg border text-center transition-all ".concat(S===e.value?"border-[#e94560] bg-[#e94560]/10":"border-border hover:border-border-hover"),children:[(0,a.jsx)("span",{className:"text-xs font-bold block",style:{color:e.color},children:e.label}),(0,a.jsx)("span",{className:"text-[9px] text-text-muted",children:e.desc})]},e.value))})]}),!A&&(0,a.jsxs)("button",{className:"w-full py-2.5 rounded-xl text-sm font-bold text-white bg-gradient-to-r from-amber-500 to-red-500 opacity-70 cursor-not-allowed",disabled:!0,children:[j("settings.upgrade")," (준비 중)"]})]})]})]}),"display"===k&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-[10px] text-text-muted uppercase tracking-wider font-semibold mb-3",children:j("nav.theme")}),(0,a.jsx)("div",{className:"grid grid-cols-3 gap-2",children:[{value:"system",label:j("nav.themeSystem"),icon:"\uD83D\uDDA5"},{value:"light",label:j("nav.themeLight"),icon:"☀️"},{value:"dark",label:j("nav.themeDark"),icon:"\uD83C\uDF19"}].map(e=>(0,a.jsxs)("button",{onClick:()=>g(e.value),className:"p-3 rounded-xl border text-center transition-all ".concat(v===e.value?"border-[#e94560] bg-[#e94560]/10 text-[#e94560]":"border-border text-text-secondary hover:border-border-hover"),children:[(0,a.jsx)("span",{className:"text-xl block mb-1",children:e.icon}),(0,a.jsx)("span",{className:"text-[11px] font-semibold",children:e.label})]},e.value))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-[10px] text-text-muted uppercase tracking-wider font-semibold mb-3",children:j("settings.fontSize")}),(0,a.jsx)("div",{className:"grid grid-cols-3 gap-2",children:[{value:"small",label:j("settings.fontSmall"),preview:"Aa",size:"text-xs"},{value:"medium",label:j("settings.fontMedium"),preview:"Aa",size:"text-sm"},{value:"large",label:j("settings.fontLarge"),preview:"Aa",size:"text-base"}].map(e=>(0,a.jsxs)("button",{onClick:()=>P(e.value),className:"p-3 rounded-xl border text-center transition-all ".concat(w===e.value?"border-[#e94560] bg-[#e94560]/10 text-[#e94560]":"border-border text-text-secondary hover:border-border-hover"),children:[(0,a.jsx)("span",{className:"".concat(e.size," font-bold block mb-1"),children:e.preview}),(0,a.jsx)("span",{className:"text-[11px] font-semibold",children:e.label})]},e.value))}),(0,a.jsxs)("p",{className:"text-[11px] text-text-muted mt-2",children:["현재: ","small"===w?"12px":"large"===w?"16px":"14px"]})]})]}),"language"===k&&(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-[10px] text-text-muted uppercase tracking-wider font-semibold mb-3",children:j("settings.language")}),(0,a.jsx)("p",{className:"text-[11px] text-text-muted mb-4",children:"접속 지역 및 IP 주소에 따라 자동으로 언어가 감지됩니다. 수동으로 변경할 수도 있습니다."}),(0,a.jsx)("div",{className:"space-y-2",children:h.map(e=>(0,a.jsxs)("button",{onClick:()=>L(e.code),className:"w-full flex items-center gap-3 p-3 rounded-xl border transition-all ".concat(N===e.code?"border-[#e94560] bg-[#e94560]/10":"border-border hover:border-border-hover"),children:[(0,a.jsx)("span",{className:"text-xl",children:e.flag}),(0,a.jsx)("span",{className:"text-sm font-semibold ".concat(N===e.code?"text-[#e94560]":"text-text-primary"),children:e.name}),N===e.code&&(0,a.jsx)("span",{className:"ml-auto text-[#e94560] text-sm",children:"✓"})]},e.code))})]})}),"info"===k&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"text-center py-4",children:[(0,a.jsx)("div",{className:"text-4xl mb-3",children:"✅"}),(0,a.jsx)("h3",{className:"text-lg font-extrabold text-text-primary mb-1",children:"AI Todo"}),(0,a.jsx)("p",{className:"text-xs text-text-muted",children:"버전 0.1.0 — MVP"})]}),(0,a.jsx)("div",{className:"space-y-2 text-xs text-text-secondary",children:[{label:"프레임워크",value:"Next.js 14 (App Router)"},{label:"데이터베이스",value:"Firebase Firestore"},{label:"인증",value:"Firebase Auth"},{label:"배포",value:"Cloudflare Pages"}].map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between py-2 border-b border-border/50",children:[(0,a.jsx)("span",{className:"text-text-muted",children:e.label}),(0,a.jsx)("span",{className:"font-medium text-text-primary",children:e.value})]},e.label))}),(0,a.jsx)("div",{className:"mt-4 p-3 bg-background rounded-xl border border-border text-[11px] text-text-muted text-center",children:"\xa9 2026 AI Todo \xb7 개인 프로젝트"})]})]})]})]})})]})}let p=["#e94560","#8b5cf6","#06b6d4","#22c55e","#f59e0b","#ec4899"];function v(e){let{isOpen:t=!1,onClose:s}=e,i=(0,l.usePathname)(),m=(0,l.useRouter)(),{user:h,signOut:f}=(0,n.a)(),{theme:v,setTheme:g}=(0,c.F)(),{t:j}=(0,o.QT)(),{lists:N}=(0,u.a)(),[y,k]=(0,r.useState)([]),[D,w]=(0,r.useState)(null),[C,S]=(0,r.useState)(""),[E,A]=(0,r.useState)(!1),[F,P]=(0,r.useState)(""),[L,T]=(0,r.useState)(!1),[_,z]=(0,r.useState)("free");(0,r.useEffect)(()=>{k(N)},[N]),(0,r.useEffect)(()=>{h&&(0,x.nS)(h.uid).then(e=>z(e.plan||"free")).catch(()=>{})},[h]);let I=async()=>{await f(),m.push("/login")},K=async e=>{k(t=>t.filter(t=>t.id!==e));try{await (0,x.SN)(h.uid,e)}catch(e){console.error("Failed to delete list:",e)}},B=async e=>{if(!h||!C.trim()){w(null);return}k(t=>t.map(t=>t.id===e?{...t,label:C.trim()}:t)),w(null);try{await (0,x.s9)(h.uid,e,{label:C.trim()})}catch(e){console.error("Failed to rename list:",e)}},R=async()=>{if(!h||!F.trim()){A(!1);return}let e=p[y.length%p.length],t=F.trim();P(""),A(!1);try{await (0,x.$8)(h.uid,{label:t,color:e})}catch(e){console.error("Failed to add list:",e)}},M=(null==h?void 0:h.displayName)||"사용자",U=null==h?void 0:h.photoURL,O=M.charAt(0).toUpperCase(),H="free"===_?j("freePlan"):"pro"===_?"Pro Plan":"Team Plan";return(0,a.jsxs)(a.Fragment,{children:[t&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 z-40 md:hidden",onClick:s}),(0,a.jsxs)("aside",{className:"\n        w-64 border-r border-border bg-background p-6 flex flex-col flex-shrink-0\n        fixed top-0 left-0 h-full z-50\n        md:static md:h-full md:z-auto\n        transition-transform duration-300 ease-in-out\n        ".concat(t?"translate-x-0":"-translate-x-full md:translate-x-0","\n      "),children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)(d(),{href:"/my-day",children:(0,a.jsx)("h1",{className:"text-xl font-extrabold bg-gradient-to-r from-text-primary to-[#e94560] bg-clip-text text-transparent",children:"AI Todo"})}),(0,a.jsx)("p",{className:"text-[10px] text-text-muted mt-1 uppercase tracking-widest",children:"Digital Assistant"})]}),(0,a.jsx)("nav",{className:"flex-shrink-0 space-y-1",children:[{icon:"☀️",labelKey:"nav.myDay",href:"/my-day"},{icon:"\uD83D\uDCCB",labelKey:"nav.allTasks",href:"/tasks"},{icon:"\uD83D\uDCC5",labelKey:"nav.upcoming",href:"/upcoming"},{icon:"\uD83D\uDCDD",labelKey:"nav.notes",href:"/notes"},{icon:"\uD83D\uDC65",labelKey:"nav.shared",href:"/shared"},{icon:"⭐",labelKey:"nav.important",href:"/important"}].map(e=>{let t=i===e.href||"/tasks"===e.href&&(null==i?void 0:i.startsWith("/tasks"));return(0,a.jsxs)(d(),{href:e.href,className:"w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm transition-all ".concat(t?"bg-[#e94560]/10 text-[#e94560] font-semibold":"text-text-secondary hover:bg-background-card hover:text-text-primary"),children:[(0,a.jsx)("span",{className:"text-base",children:e.icon}),(0,a.jsx)("span",{className:"flex-1 text-left",children:j(e.labelKey)})]},e.href)})}),(0,a.jsxs)("div",{className:"mt-4 flex-1 min-h-0 overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsx)("span",{className:"text-[10px] text-text-muted uppercase tracking-widest font-semibold",children:j("nav.lists")}),(0,a.jsx)("button",{onClick:()=>A(!E),className:"text-text-inactive hover:text-[#e94560] transition-colors text-sm",title:j("common.add"),children:"+"})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[y.map(e=>(0,a.jsxs)("div",{className:"group w-full flex items-center gap-3 px-3 py-2 rounded-lg text-sm text-text-secondary hover:bg-background-card hover:text-text-primary transition-all",children:[(0,a.jsx)("span",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:e.color}}),D===e.id?(0,a.jsx)("input",{value:C,onChange:e=>S(e.target.value),onBlur:()=>B(e.id),onKeyDown:t=>{"Enter"===t.key&&B(e.id),"Escape"===t.key&&w(null)},autoFocus:!0,className:"flex-1 bg-transparent text-text-primary text-sm outline-none border-b border-[#e94560]"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d(),{href:"/tasks?list=".concat(e.id),className:"flex-1 cursor-pointer truncate",children:e.label}),(0,a.jsxs)("div",{className:"flex items-center gap-0.5 opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0",children:[(0,a.jsx)("button",{onClick:t=>{t.preventDefault(),w(e.id),S(e.label)},className:"w-5 h-5 flex items-center justify-center text-text-inactive hover:text-text-secondary transition-colors text-[11px]",title:"이름 변경",children:"✏️"}),(0,a.jsx)("button",{onClick:t=>{t.preventDefault(),K(e.id)},className:"w-5 h-5 flex items-center justify-center text-text-inactive hover:text-[#e94560] transition-colors text-sm",title:"목록 삭제",children:"\xd7"})]})]})]},e.id)),E&&(0,a.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1.5",children:[(0,a.jsx)("span",{className:"w-3 h-3 rounded-full flex-shrink-0 bg-[#e94560]"}),(0,a.jsx)("input",{value:F,onChange:e=>P(e.target.value),onKeyDown:e=>{"Enter"===e.key&&R(),"Escape"===e.key&&A(!1)},onBlur:R,placeholder:"목록 이름...",autoFocus:!0,className:"flex-1 bg-transparent text-text-primary text-sm placeholder-text-muted outline-none border-b border-[#e94560]"})]})]})]}),(0,a.jsxs)("div",{className:"mt-6 pt-4 border-t border-border flex-shrink-0",children:[(0,a.jsx)("p",{className:"text-[10px] text-text-muted uppercase tracking-widest font-semibold mb-2",children:j("nav.theme")}),(0,a.jsx)("div",{className:"flex gap-1",children:[{value:"system",icon:"\uD83D\uDDA5",labelKey:"nav.themeSystem"},{value:"light",icon:"☀️",labelKey:"nav.themeLight"},{value:"dark",icon:"\uD83C\uDF19",labelKey:"nav.themeDark"}].map(e=>(0,a.jsxs)("button",{onClick:()=>g(e.value),title:j(e.labelKey),className:"flex-1 flex flex-col items-center gap-0.5 py-1.5 rounded-lg text-xs transition-all ".concat(v===e.value?"bg-[#e94560]/15 text-[#e94560] font-semibold":"text-text-secondary hover:bg-background-card hover:text-text-primary"),children:[(0,a.jsx)("span",{children:e.icon}),(0,a.jsx)("span",{className:"text-[9px]",children:j(e.labelKey)})]},e.value))})]}),(0,a.jsx)("div",{className:"mt-4 pt-4 border-t border-border flex-shrink-0",children:(0,a.jsxs)("div",{className:"flex items-center gap-3 px-2",children:[U?(0,a.jsx)("img",{src:U,alt:M,className:"w-8 h-8 rounded-full flex-shrink-0",referrerPolicy:"no-referrer"}):(0,a.jsx)("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-[#e94560] to-[#533483] flex items-center justify-center text-xs font-bold text-white flex-shrink-0",children:O}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-sm font-semibold text-text-primary truncate",children:M}),(0,a.jsx)("p",{className:"text-[10px] text-text-muted",children:H})]}),(0,a.jsx)("button",{onClick:()=>T(!0),className:"text-text-inactive hover:text-text-secondary transition-colors flex-shrink-0",title:j("settings.title"),children:(0,a.jsxs)("svg",{width:"15",height:"15",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("circle",{cx:"12",cy:"12",r:"3"}),(0,a.jsx)("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"})]})}),(0,a.jsx)("button",{onClick:I,className:"text-text-inactive hover:text-[#e94560] transition-colors text-xs flex-shrink-0",title:"로그아웃",children:(0,a.jsxs)("svg",{width:"15",height:"15",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),(0,a.jsx)("polyline",{points:"16 17 21 12 16 7"}),(0,a.jsx)("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]})})]})})]}),L&&(0,a.jsx)(b,{onClose:()=>T(!1)})]})}var g=s(4859);function j(e){let{client:t,slot:s,className:l=""}=e,{user:i}=(0,n.a)(),d=(0,r.useRef)(null),c=(0,r.useRef)(!1),[o,u]=(0,r.useState)("free"),[m,h]=(0,r.useState)(!0),f=null!=t?t:g.env.NEXT_PUBLIC_ADSENSE_CLIENT,b=null!=s?s:g.env.NEXT_PUBLIC_ADSENSE_SLOT,p=!!f&&!!b;return((0,r.useEffect)(()=>{if(!i){h(!1);return}(0,x.nS)(i.uid).then(e=>{u(e.plan||"free"),h(!1)}).catch(()=>h(!1))},[i]),(0,r.useEffect)(()=>{if(p&&!c.current&&"free"===o)try{(window.adsbygoogle=window.adsbygoogle||[]).push({}),c.current=!0}catch(e){}},[p,o]),m||"free"!==o)?null:p?(0,a.jsx)("div",{className:"w-full overflow-hidden ".concat(l),style:{minHeight:52},children:(0,a.jsx)("ins",{ref:d,className:"adsbygoogle",style:{display:"block"},"data-ad-client":f,"data-ad-slot":b,"data-ad-format":"auto","data-full-width-responsive":"true"})}):(0,a.jsxs)("div",{className:"w-full flex items-center justify-center gap-3 px-4 py-2 bg-background-card border-b border-border text-text-muted text-xs ".concat(l),style:{minHeight:52},children:[(0,a.jsx)("span",{className:"text-[10px] uppercase tracking-widest text-text-inactive font-semibold",children:"광고"}),(0,a.jsxs)("span",{className:"flex-1 text-center text-text-inactive text-[11px]",children:["Google AdSense — 광고가 이 위치에 표시됩니다 (",(0,a.jsx)("code",{className:"text-[10px]",children:"NEXT_PUBLIC_ADSENSE_CLIENT"})," 환경변수 설정 후 활성화)"]}),(0,a.jsx)("span",{className:"text-[9px] text-text-inactive border border-border rounded px-1.5 py-0.5 flex-shrink-0",children:"AD"})]})}function N(e){let{children:t}=e,{user:s,loading:i}=(0,n.a)(),d=(0,l.useRouter)(),c=(0,l.usePathname)(),[o,x]=(0,r.useState)(!1);return((0,r.useEffect)(()=>{x(!1)},[c]),(0,r.useEffect)(()=>{i||s||d.replace("/login")},[s,i,d]),i)?(0,a.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-background",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-8 h-8 border-2 border-[#e94560] border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-text-secondary text-sm",children:"로딩 중..."})]})}):s?(0,a.jsxs)("div",{className:"flex h-screen overflow-hidden bg-background text-text-primary",style:{fontFamily:"'Pretendard Variable', -apple-system, sans-serif"},children:[(0,a.jsxs)("div",{className:"md:hidden fixed top-0 left-0 right-0 z-30 h-14 bg-background border-b border-border flex items-center px-4 gap-3 flex-shrink-0",children:[(0,a.jsxs)("button",{onClick:()=>x(!0),className:"w-9 h-9 flex flex-col items-center justify-center gap-1.5 rounded-lg text-text-secondary hover:bg-background-card transition-colors","aria-label":"메뉴 열기",children:[(0,a.jsx)("span",{className:"w-5 h-0.5 bg-current rounded-full"}),(0,a.jsx)("span",{className:"w-5 h-0.5 bg-current rounded-full"}),(0,a.jsx)("span",{className:"w-4 h-0.5 bg-current rounded-full"})]}),(0,a.jsx)("h1",{className:"text-lg font-extrabold bg-gradient-to-r from-text-primary to-[#e94560] bg-clip-text text-transparent",children:"AI Todo"})]}),(0,a.jsx)(v,{isOpen:o,onClose:()=>x(!1)}),(0,a.jsxs)("main",{className:"flex-1 overflow-y-auto flex flex-col pt-14 md:pt-0 min-w-0",children:[(0,a.jsx)(j,{}),(0,a.jsx)("div",{className:"flex-1",children:t})]})]}):null}},2052:function(e,t,s){"use strict";s.d(t,{P:function(){return c},a:function(){return o}});var a=s(7573),r=s(7653),l=s(6228),n=s(1926),i=s(4193);let d=(0,r.createContext)({tasks:[],lists:[],notes:[],folders:[],loading:!0});function c(e){let{children:t}=e,{user:s,loading:c}=(0,i.a)(),[o,x]=(0,r.useState)([]),[u,m]=(0,r.useState)([]),[h,f]=(0,r.useState)([]),[b,p]=(0,r.useState)([]),[v,g]=(0,r.useState)(!0),j=(0,r.useRef)([]);return(0,r.useEffect)(()=>{if(c)return;if(j.current.forEach(e=>e()),j.current=[],!s){x([]),m([]),f([]),p([]),g(!1);return}g(!0);let e=s.uid,t=0,a=()=>{++t>=4&&g(!1)},r=(0,l.cf)((0,l.IO)((0,l.hJ)(n.db,"users",e,"tasks"),(0,l.Xo)("createdAt","desc")),e=>{x(e.docs.map(e=>({id:e.id,...e.data()}))),a()},()=>a()),i=(0,l.cf)((0,l.hJ)(n.db,"users",e,"lists"),e=>{m(e.docs.map(e=>({id:e.id,...e.data()}))),a()},()=>a()),d=(0,l.cf)((0,l.IO)((0,l.hJ)(n.db,"users",e,"notes"),(0,l.Xo)("createdAt","desc")),e=>{f(e.docs.map(e=>({id:e.id,...e.data()}))),a()},()=>a()),o=(0,l.cf)((0,l.hJ)(n.db,"users",e,"folders"),e=>{p(e.docs.map(e=>({id:e.id,...e.data()}))),a()},()=>a());return j.current=[r,i,d,o],()=>{j.current.forEach(e=>e()),j.current=[]}},[s,c]),(0,a.jsx)(d.Provider,{value:{tasks:o,lists:u,notes:h,folders:b,loading:v},children:t})}function o(){return(0,r.useContext)(d)}},8574:function(e,t,s){"use strict";s.d(t,{F:function(){return o},f:function(){return c}});var a=s(7573),r=s(7653),l=s(4193),n=s(6921);let i=(0,r.createContext)({theme:"system",setTheme:()=>{}});function d(e){let t=document.documentElement;if("light"===e)t.classList.add("light"),t.classList.remove("dark");else if("dark"===e)t.classList.add("dark"),t.classList.remove("light");else{let e=window.matchMedia("(prefers-color-scheme: dark)").matches;t.classList.toggle("dark",e),t.classList.toggle("light",!e)}}function c(e){let{children:t}=e,{user:s}=(0,l.a)(),[c,o]=(0,r.useState)("system");return(0,r.useEffect)(()=>{s&&(0,n.nS)(s.uid).then(e=>{o(e.theme),d(e.theme)})},[s]),(0,r.useEffect)(()=>{if("system"!==c)return;let e=window.matchMedia("(prefers-color-scheme: dark)"),t=()=>d("system");return e.addEventListener("change",t),()=>e.removeEventListener("change",t)},[c]),(0,a.jsx)(i.Provider,{value:{theme:c,setTheme:e=>{o(e),d(e),s&&(0,n.d2)(s.uid,{theme:e})}},children:t})}let o=()=>(0,r.useContext)(i)},1695:function(e,t,s){"use strict";var a=s(1219);s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})}},function(e){e.O(0,[301,787,226,340,937,293,528,744],function(){return e(e.s=3770)}),_N_E=e.O()}]);