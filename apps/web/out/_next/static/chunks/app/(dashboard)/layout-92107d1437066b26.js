(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[642],{8878:function(e,t,s){Promise.resolve().then(s.bind(s,4964))},4964:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return j}});var a=s(7573),l=s(7653),r=s(1695),n=s(4193),i=s(6340),d=s.n(i),c=s(8574),o=s(9937),x=s(6921),u=s(2052);function m(){return"__TAURI__"in window||"__TAURI_INTERNALS__"in window}function h(e){document.documentElement.setAttribute("data-font",e)}let b=[{code:"ko",name:"한국어",flag:"\uD83C\uDDF0\uD83C\uDDF7"},{code:"en",name:"English",flag:"\uD83C\uDDFA\uD83C\uDDF8"},{code:"ja",name:"日本語",flag:"\uD83C\uDDEF\uD83C\uDDF5"},{code:"es",name:"Espa\xf1ol",flag:"\uD83C\uDDEA\uD83C\uDDF8"},{code:"pt",name:"Portugu\xeas",flag:"\uD83C\uDDE7\uD83C\uDDF7"},{code:"fr",name:"Fran\xe7ais",flag:"\uD83C\uDDEB\uD83C\uDDF7"}],f=[{value:"free",label:"Free",desc:"기본 기능 무제한",color:"#64748b"},{value:"pro",label:"Pro",desc:"AI + 10GB 스토리지",color:"#e94560"},{value:"team",label:"Team",desc:"무제한 협업 + 관리자 기능",color:"#8b5cf6"}];function p(e){var t,r,i,d,p,v;let{onClose:g}=e,{user:j}=(0,n.a)(),{theme:N,setTheme:y}=(0,c.F)(),{t:w,language:k,setLanguage:D}=(0,o.QT)(),{storageUsed:C}=(0,u.a)(),[S,F]=(0,l.useState)("account"),[A,E]=(0,l.useState)("medium"),[P,_]=(0,l.useState)("free"),[L,T]=(0,l.useState)(!1),[B,z]=(0,l.useState)(!1),[I,K]=(0,l.useState)("idle"),[M,R]=(0,l.useState)(""),[U,G]=(0,l.useState)(""),[O,J]=(0,l.useState)(0),[W,V]=(0,l.useState)("");(0,l.useEffect)(()=>{let e=m();z(e),e&&s.e(571).then(s.bind(s,3571)).then(e=>{let{getVersion:t}=e;t().then(G).catch(()=>{})})},[]);let H=(0,l.useCallback)(async()=>{if(m()){K("checking"),V("");try{let{check:e}=await s.e(898).then(s.bind(s,9898)),t=await e();t?(R(t.version),K("available")):K("up-to-date")}catch(e){V(e instanceof Error?e.message:"업데이트 확인 실패"),K("error")}}},[]),X=(0,l.useCallback)(async()=>{if(m()){K("downloading"),J(0);try{let{check:e}=await s.e(898).then(s.bind(s,9898)),t=await e();if(!t)return;let a=0,l=0;await t.downloadAndInstall(e=>{"Started"===e.event?(l=e.data.contentLength||0,a=0):"Progress"===e.event?(a+=e.data.chunkLength||0,l>0?J(Math.min(100,Math.round(a/l*100))):J(e=>Math.min(99,e+1))):"Finished"===e.event&&J(100)}),K("ready")}catch(e){V(e instanceof Error?e.message:"업데이트 다운로드 실패"),K("error")}}},[]),Q=(0,l.useCallback)(async()=>{try{let e=await s.e(645).then(s.bind(s,8645));await e.invoke("plugin:updater|restart")}catch(e){window.location.reload()}},[]);(0,l.useEffect)(()=>{j&&(0,x.nS)(j.uid).then(e=>{var t;let s=null!==(t=e.fontSize)&&void 0!==t?t:"medium";E(s),h(s),_(e.plan||"free"),T(e.isAdmin||!1)})},[j]);let $=(0,x.ln)(P),q=Math.min(100,C/$*100),Y=e=>e<1024?"".concat(e," B"):e<1048576?"".concat((e/1024).toFixed(1)," KB"):e<1073741824?"".concat((e/1048576).toFixed(1)," MB"):"".concat((e/1073741824).toFixed(1)," GB"),Z=e=>{E(e),h(e),j&&(0,x.d2)(j.uid,{fontSize:e})},ee=e=>{D(e)},et=e=>{_(e),j&&(0,x.d2)(j.uid,{plan:e})},es=[{id:"account",label:w("settings.account"),icon:"\uD83D\uDC64"},{id:"display",label:w("settings.display"),icon:"\uD83C\uDFA8"},{id:"language",label:w("settings.language"),icon:"\uD83C\uDF10"},{id:"info",label:w("settings.info"),icon:"ℹ️"}];return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"fixed inset-0 z-50 bg-black/50 backdrop-blur-sm",onClick:g}),(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"w-full max-w-lg bg-background-card border border-border rounded-2xl shadow-2xl overflow-hidden",onClick:e=>e.stopPropagation(),style:{animation:"fadeUp 0.2s ease-out"},children:[(0,a.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b border-border",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-lg",children:"⚙️"}),(0,a.jsx)("h2",{className:"text-base font-bold text-text-primary",children:w("settings.title")})]}),(0,a.jsx)("button",{onClick:g,className:"w-8 h-8 flex items-center justify-center rounded-lg text-text-muted hover:text-text-primary hover:bg-border transition-colors",children:(0,a.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",children:(0,a.jsx)("path",{d:"M1 1L13 13M13 1L1 13",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})})})]}),(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("div",{className:"w-32 border-r border-border py-4 flex-shrink-0",children:es.map(e=>(0,a.jsxs)("button",{onClick:()=>F(e.id),className:"w-full text-left px-4 py-2.5 text-xs font-semibold flex items-center gap-2 transition-colors ".concat(S===e.id?"text-[#e94560] bg-[#e94560]/10":"text-text-secondary hover:text-text-primary hover:bg-border/30"),children:[(0,a.jsx)("span",{children:e.icon}),e.label]},e.id))}),(0,a.jsxs)("div",{className:"flex-1 p-6 overflow-y-auto max-h-[60vh]",children:["account"===S&&(0,a.jsxs)("div",{className:"space-y-5",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-[10px] text-text-muted uppercase tracking-wider font-semibold mb-3",children:w("settings.profile")}),(0,a.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-background rounded-xl border border-border",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-[#e94560] to-[#533483] flex items-center justify-center text-white font-bold text-sm flex-shrink-0",children:null!==(v=null==j?void 0:null===(r=j.email)||void 0===r?void 0:null===(t=r[0])||void 0===t?void 0:t.toUpperCase())&&void 0!==v?v:"?"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-sm font-semibold text-text-primary truncate",children:(null==j?void 0:j.displayName)||"사용자"}),(0,a.jsx)("p",{className:"text-xs text-text-muted truncate",children:null==j?void 0:j.email})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-[10px] text-text-muted uppercase tracking-wider font-semibold mb-3",children:w("settings.plan")}),(0,a.jsxs)("div",{className:"p-4 bg-background rounded-xl border border-border",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("span",{className:"text-xs font-bold text-text-primary",children:["free"===P?"Free":"pro"===P?"Pro":"Team"," 플랜"]}),(0,a.jsx)("p",{className:"text-[11px] text-text-muted mt-0.5",children:null===(i=f.find(e=>e.value===P))||void 0===i?void 0:i.desc})]}),(0,a.jsx)("span",{className:"px-2 py-0.5 rounded-full text-[10px] font-bold",style:{color:null===(d=f.find(e=>e.value===P))||void 0===d?void 0:d.color,backgroundColor:"".concat(null===(p=f.find(e=>e.value===P))||void 0===p?void 0:p.color,"20")},children:w("settings.currentPlan")})]}),(0,a.jsx)("div",{className:"space-y-1.5 mb-4",children:[{label:"할일 목록 관리",included:!0},{label:"노트 작성",included:!0},{label:"기기 동기화",included:!0},{label:"AI 자동 작성/요약",included:"free"!==P},{label:"무제한 공유 협업",included:"team"===P},{label:"파일 스토리지 10GB",included:"free"!==P}].map(e=>(0,a.jsxs)("div",{className:"flex items-center gap-2 text-[11px]",children:[(0,a.jsx)("span",{className:e.included?"text-[#22c55e]":"text-text-inactive",children:e.included?"✓":"–"}),(0,a.jsx)("span",{className:e.included?"text-text-secondary":"text-text-inactive",children:e.label})]},e.label))}),L&&(0,a.jsxs)("div",{className:"mb-3 p-3 bg-amber-500/5 border border-amber-500/20 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)("span",{className:"text-xs",children:"\uD83D\uDD27"}),(0,a.jsx)("span",{className:"text-[10px] font-bold text-amber-500 uppercase tracking-wider",children:"관리자 전용"})]}),(0,a.jsx)("div",{className:"grid grid-cols-3 gap-2",children:f.map(e=>(0,a.jsxs)("button",{onClick:()=>et(e.value),className:"p-2 rounded-lg border text-center transition-all ".concat(P===e.value?"border-[#e94560] bg-[#e94560]/10":"border-border hover:border-border-hover"),children:[(0,a.jsx)("span",{className:"text-xs font-bold block",style:{color:e.color},children:e.label}),(0,a.jsx)("span",{className:"text-[9px] text-text-muted",children:e.desc})]},e.value))})]}),!L&&(0,a.jsxs)("button",{className:"w-full py-2.5 rounded-xl text-sm font-bold text-white bg-gradient-to-r from-amber-500 to-red-500 opacity-70 cursor-not-allowed",disabled:!0,children:[w("settings.upgrade")," (준비 중)"]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-[10px] text-text-muted uppercase tracking-wider font-semibold mb-3",children:"스토리지"}),(0,a.jsxs)("div",{className:"p-4 bg-background rounded-xl border border-border",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-xs text-text-secondary",children:"사용량"}),(0,a.jsxs)("span",{className:"text-xs font-bold text-text-primary",children:[Y(C)," / ",Y($)]})]}),(0,a.jsx)("div",{className:"w-full h-2.5 bg-border rounded-full overflow-hidden mb-2",children:(0,a.jsx)("div",{className:"h-full rounded-full transition-all duration-500 ".concat(q>90?"bg-[#e94560]":q>70?"bg-amber-500":"bg-gradient-to-r from-[#e94560] to-[#533483]"),style:{width:"".concat(q,"%")}})}),(0,a.jsxs)("p",{className:"text-[10px] text-text-muted",children:["free"===P?"Free 플랜: 100 MB":"pro"===P?"Pro 플랜: 10 GB":"Team 플랜: 50 GB",q>90&&(0,a.jsx)("span",{className:"text-[#e94560] ml-1 font-semibold",children:"— 용량이 거의 찼습니다"})]})]})]})]}),"display"===S&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-[10px] text-text-muted uppercase tracking-wider font-semibold mb-3",children:w("nav.theme")}),(0,a.jsx)("div",{className:"grid grid-cols-3 gap-2",children:[{value:"system",label:w("nav.themeSystem"),icon:"\uD83D\uDDA5"},{value:"light",label:w("nav.themeLight"),icon:"☀️"},{value:"dark",label:w("nav.themeDark"),icon:"\uD83C\uDF19"}].map(e=>(0,a.jsxs)("button",{onClick:()=>y(e.value),className:"p-3 rounded-xl border text-center transition-all ".concat(N===e.value?"border-[#e94560] bg-[#e94560]/10 text-[#e94560]":"border-border text-text-secondary hover:border-border-hover"),children:[(0,a.jsx)("span",{className:"text-xl block mb-1",children:e.icon}),(0,a.jsx)("span",{className:"text-[11px] font-semibold",children:e.label})]},e.value))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-[10px] text-text-muted uppercase tracking-wider font-semibold mb-3",children:w("settings.fontSize")}),(0,a.jsx)("div",{className:"grid grid-cols-3 gap-2",children:[{value:"small",label:w("settings.fontSmall"),preview:"Aa",size:"text-xs"},{value:"medium",label:w("settings.fontMedium"),preview:"Aa",size:"text-sm"},{value:"large",label:w("settings.fontLarge"),preview:"Aa",size:"text-base"}].map(e=>(0,a.jsxs)("button",{onClick:()=>Z(e.value),className:"p-3 rounded-xl border text-center transition-all ".concat(A===e.value?"border-[#e94560] bg-[#e94560]/10 text-[#e94560]":"border-border text-text-secondary hover:border-border-hover"),children:[(0,a.jsx)("span",{className:"".concat(e.size," font-bold block mb-1"),children:e.preview}),(0,a.jsx)("span",{className:"text-[11px] font-semibold",children:e.label})]},e.value))}),(0,a.jsxs)("p",{className:"text-[11px] text-text-muted mt-2",children:["현재: ","small"===A?"12px":"large"===A?"16px":"14px"]})]})]}),"language"===S&&(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-[10px] text-text-muted uppercase tracking-wider font-semibold mb-3",children:w("settings.language")}),(0,a.jsx)("p",{className:"text-[11px] text-text-muted mb-4",children:"접속 지역 및 IP 주소에 따라 자동으로 언어가 감지됩니다. 수동으로 변경할 수도 있습니다."}),(0,a.jsx)("div",{className:"space-y-2",children:b.map(e=>(0,a.jsxs)("button",{onClick:()=>ee(e.code),className:"w-full flex items-center gap-3 p-3 rounded-xl border transition-all ".concat(k===e.code?"border-[#e94560] bg-[#e94560]/10":"border-border hover:border-border-hover"),children:[(0,a.jsx)("span",{className:"text-xl",children:e.flag}),(0,a.jsx)("span",{className:"text-sm font-semibold ".concat(k===e.code?"text-[#e94560]":"text-text-primary"),children:e.name}),k===e.code&&(0,a.jsx)("span",{className:"ml-auto text-[#e94560] text-sm",children:"✓"})]},e.code))})]})}),"info"===S&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"text-center py-4",children:[(0,a.jsx)("div",{className:"text-4xl mb-3",children:"✅"}),(0,a.jsx)("h3",{className:"text-lg font-extrabold text-text-primary mb-1",children:"AI Todo"}),(0,a.jsxs)("p",{className:"text-xs text-text-muted",children:["버전 ",U||"1.0.0",B?" (Desktop)":" (Web)"]})]}),B&&(0,a.jsxs)("div",{className:"p-4 bg-background rounded-xl border border-border space-y-3",children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsx)("span",{className:"text-[10px] uppercase tracking-wider font-semibold text-text-muted",children:"소프트웨어 업데이트"})}),"idle"===I&&(0,a.jsx)("button",{onClick:H,className:"w-full py-2.5 px-4 rounded-xl text-sm font-semibold bg-[#e94560] hover:bg-[#d63b55] text-white transition-all",children:"업데이트 확인"}),"checking"===I&&(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2 py-2.5",children:[(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-[#e94560] border-t-transparent rounded-full animate-spin"}),(0,a.jsx)("span",{className:"text-xs text-text-secondary",children:"업데이트 확인 중..."})]}),"up-to-date"===I&&(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2 py-2.5",children:[(0,a.jsx)("span",{className:"text-[#22c55e] text-sm",children:"✓"}),(0,a.jsxs)("span",{className:"text-xs text-text-secondary",children:["최신 버전입니다 ",U?"(v".concat(U,")"):""]})]}),"available"===I&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,a.jsx)("span",{className:"text-[#f59e0b] text-sm",children:"●"}),(0,a.jsxs)("span",{className:"text-xs text-text-primary font-semibold",children:["v",M," 업데이트 가능"]})]}),(0,a.jsx)("button",{onClick:X,className:"w-full py-2.5 px-4 rounded-xl text-sm font-semibold bg-[#22c55e] hover:bg-[#16a34a] text-white transition-all",children:"지금 업데이트"})]}),"downloading"===I&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs text-text-secondary",children:[(0,a.jsx)("span",{children:"다운로드 중..."}),(0,a.jsxs)("span",{children:[O,"%"]})]}),(0,a.jsx)("div",{className:"w-full h-2 bg-border rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:"h-full bg-[#e94560] rounded-full transition-all duration-300",style:{width:"".concat(O,"%")}})})]}),"ready"===I&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,a.jsx)("span",{className:"text-[#22c55e] text-sm",children:"✓"}),(0,a.jsx)("span",{className:"text-xs text-text-primary",children:"업데이트 설치 완료"})]}),(0,a.jsx)("button",{onClick:Q,className:"w-full py-2.5 px-4 rounded-xl text-sm font-semibold bg-[#8b5cf6] hover:bg-[#7c3aed] text-white transition-all",children:"재시작하여 적용"})]}),"error"===I&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("p",{className:"text-xs text-red-400 text-center",children:W}),(0,a.jsx)("button",{onClick:H,className:"w-full py-2 px-4 rounded-xl text-xs font-semibold border border-border hover:border-border-hover text-text-secondary transition-all",children:"다시 시도"})]})]}),(0,a.jsx)("div",{className:"space-y-2 text-xs text-text-secondary",children:[{label:"프레임워크",value:"Next.js 14 (App Router)"},{label:"데이터베이스",value:"Firebase Firestore"},{label:"인증",value:"Firebase Auth"},{label:"배포",value:B?"Tauri 2 (Desktop)":"Cloudflare Pages"}].map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between py-2 border-b border-border/50",children:[(0,a.jsx)("span",{className:"text-text-muted",children:e.label}),(0,a.jsx)("span",{className:"font-medium text-text-primary",children:e.value})]},e.label))}),(0,a.jsx)("div",{className:"mt-4 p-3 bg-background rounded-xl border border-border text-[11px] text-text-muted text-center",children:"\xa9 2026 AI Todo \xb7 개인 프로젝트"})]})]})]})]})})]})}let v=["#e94560","#8b5cf6","#06b6d4","#22c55e","#f59e0b","#ec4899"];function g(e){let{isOpen:t=!1,onClose:i}=e,m=(0,r.usePathname)(),h=(0,r.useRouter)(),{user:b,signOut:f}=(0,n.a)(),{theme:g,setTheme:j}=(0,c.F)(),{t:N}=(0,o.QT)(),{lists:y,storageUsed:w}=(0,u.a)(),[k,D]=(0,l.useState)([]),[C,S]=(0,l.useState)(null),[F,A]=(0,l.useState)(""),[E,P]=(0,l.useState)(!1),[_,L]=(0,l.useState)(""),[T,B]=(0,l.useState)(!1),[z,I]=(0,l.useState)("free"),[K,M]=(0,l.useState)(!1);(0,l.useEffect)(()=>{if(!("__TAURI__"in window||"__TAURI_INTERNALS__"in window))return;let e=setTimeout(async()=>{try{let{check:e}=await s.e(898).then(s.bind(s,9898));await e()&&M(!0)}catch(e){}},3e3);return()=>clearTimeout(e)},[]),(0,l.useEffect)(()=>{D(y)},[y]),(0,l.useEffect)(()=>{b&&(0,x.nS)(b.uid).then(e=>{I(e.plan||"free")}).catch(()=>{})},[b]);let R=async()=>{await f(),h.push("/login")},U=async e=>{D(t=>t.filter(t=>t.id!==e));try{await (0,x.SN)(b.uid,e)}catch(e){console.error("Failed to delete list:",e)}},G=async e=>{if(!b||!F.trim()){S(null);return}D(t=>t.map(t=>t.id===e?{...t,label:F.trim()}:t)),S(null);try{await (0,x.s9)(b.uid,e,{label:F.trim()})}catch(e){console.error("Failed to rename list:",e)}},O=async()=>{if(!b||!_.trim()){P(!1);return}let e=v[k.length%v.length],t=_.trim();L(""),P(!1);try{await (0,x.$8)(b.uid,{label:t,color:e})}catch(e){console.error("Failed to add list:",e)}},J=(null==b?void 0:b.displayName)||"사용자",W=null==b?void 0:b.photoURL,V=J.charAt(0).toUpperCase(),H="free"===z?N("freePlan"):"pro"===z?"Pro Plan":"Team Plan",X=(0,x.ln)(z),Q=Math.min(100,w/X*100),$=e=>e<1024?"".concat(e," B"):e<1048576?"".concat((e/1024).toFixed(1)," KB"):e<1073741824?"".concat((e/1048576).toFixed(1)," MB"):"".concat((e/1073741824).toFixed(1)," GB");return(0,a.jsxs)(a.Fragment,{children:[t&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 z-40 md:hidden",onClick:i}),(0,a.jsxs)("aside",{className:"\n        w-64 border-r border-border bg-background p-6 flex flex-col flex-shrink-0\n        fixed top-0 left-0 h-full z-50\n        md:static md:h-full md:z-auto\n        transition-transform duration-300 ease-in-out\n        ".concat(t?"translate-x-0":"-translate-x-full md:translate-x-0","\n      "),children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)(d(),{href:"/my-day",children:(0,a.jsx)("h1",{className:"text-xl font-extrabold bg-gradient-to-r from-text-primary to-[#e94560] bg-clip-text text-transparent",children:"AI Todo"})}),(0,a.jsx)("p",{className:"text-[10px] text-text-muted mt-1 uppercase tracking-widest",children:"Digital Assistant"})]}),(0,a.jsx)("nav",{className:"flex-shrink-0 space-y-1",children:[{icon:"☀️",labelKey:"nav.myDay",href:"/my-day"},{icon:"\uD83D\uDCCB",labelKey:"nav.allTasks",href:"/tasks"},{icon:"\uD83D\uDCC5",labelKey:"nav.upcoming",href:"/upcoming"},{icon:"\uD83D\uDCDD",labelKey:"nav.notes",href:"/notes"},{icon:"\uD83E\uDDE0",labelKey:"nav.mindmap",href:"/mindmap"},{icon:"⭐",labelKey:"nav.important",href:"/important"}].map(e=>{let t=m===e.href||"/tasks"===e.href&&(null==m?void 0:m.startsWith("/tasks"));return(0,a.jsxs)(d(),{href:e.href,className:"w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm transition-all ".concat(t?"bg-[#e94560]/10 text-[#e94560] font-semibold":"text-text-secondary hover:bg-background-card hover:text-text-primary"),children:[(0,a.jsx)("span",{className:"text-base",children:e.icon}),(0,a.jsx)("span",{className:"flex-1 text-left",children:N(e.labelKey)})]},e.href)})}),(0,a.jsxs)("div",{className:"mt-4 flex-1 min-h-0 overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsx)("span",{className:"text-[10px] text-text-muted uppercase tracking-widest font-semibold",children:N("nav.lists")}),(0,a.jsx)("button",{onClick:()=>P(!E),className:"text-text-inactive hover:text-[#e94560] transition-colors text-sm",title:N("common.add"),children:"+"})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[k.map(e=>(0,a.jsxs)("div",{className:"group w-full flex items-center gap-3 px-3 py-2 rounded-lg text-sm text-text-secondary hover:bg-background-card hover:text-text-primary transition-all",children:[(0,a.jsx)("span",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:e.color}}),C===e.id?(0,a.jsx)("input",{value:F,onChange:e=>A(e.target.value),onBlur:()=>G(e.id),onKeyDown:t=>{"Enter"===t.key&&G(e.id),"Escape"===t.key&&S(null)},autoFocus:!0,className:"flex-1 bg-transparent text-text-primary text-sm outline-none border-b border-[#e94560]"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d(),{href:"/tasks?list=".concat(e.id),className:"flex-1 cursor-pointer truncate",children:e.label}),(0,a.jsxs)("div",{className:"flex items-center gap-0.5 opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0",children:[(0,a.jsx)("button",{onClick:t=>{t.preventDefault(),S(e.id),A(e.label)},className:"w-5 h-5 flex items-center justify-center text-text-inactive hover:text-text-secondary transition-colors text-[11px]",title:"이름 변경",children:"✏️"}),(0,a.jsx)("button",{onClick:t=>{t.preventDefault(),U(e.id)},className:"w-5 h-5 flex items-center justify-center text-text-inactive hover:text-[#e94560] transition-colors text-sm",title:"목록 삭제",children:"\xd7"})]})]})]},e.id)),E&&(0,a.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1.5",children:[(0,a.jsx)("span",{className:"w-3 h-3 rounded-full flex-shrink-0 bg-[#e94560]"}),(0,a.jsx)("input",{value:_,onChange:e=>L(e.target.value),onKeyDown:e=>{"Enter"===e.key&&O(),"Escape"===e.key&&P(!1)},onBlur:O,placeholder:"목록 이름...",autoFocus:!0,className:"flex-1 bg-transparent text-text-primary text-sm placeholder-text-muted outline-none border-b border-[#e94560]"})]})]})]}),(0,a.jsxs)("div",{className:"mt-6 pt-4 border-t border-border flex-shrink-0",children:[(0,a.jsx)("p",{className:"text-[10px] text-text-muted uppercase tracking-widest font-semibold mb-2",children:N("nav.theme")}),(0,a.jsx)("div",{className:"flex gap-1",children:[{value:"system",icon:"\uD83D\uDDA5",labelKey:"nav.themeSystem"},{value:"light",icon:"☀️",labelKey:"nav.themeLight"},{value:"dark",icon:"\uD83C\uDF19",labelKey:"nav.themeDark"}].map(e=>(0,a.jsxs)("button",{onClick:()=>j(e.value),title:N(e.labelKey),className:"flex-1 flex flex-col items-center gap-0.5 py-1.5 rounded-lg text-xs transition-all ".concat(g===e.value?"bg-[#e94560]/15 text-[#e94560] font-semibold":"text-text-secondary hover:bg-background-card hover:text-text-primary"),children:[(0,a.jsx)("span",{children:e.icon}),(0,a.jsx)("span",{className:"text-[9px]",children:N(e.labelKey)})]},e.value))})]}),(0,a.jsxs)("div",{className:"mt-4 pt-4 border-t border-border flex-shrink-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 px-2",children:[W?(0,a.jsx)("img",{src:W,alt:J,className:"w-8 h-8 rounded-full flex-shrink-0",referrerPolicy:"no-referrer"}):(0,a.jsx)("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-[#e94560] to-[#533483] flex items-center justify-center text-xs font-bold text-white flex-shrink-0",children:V}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-sm font-semibold text-text-primary truncate",children:J}),(0,a.jsx)("p",{className:"text-[10px] text-text-muted",children:H})]}),(0,a.jsxs)("button",{onClick:()=>B(!0),className:"relative text-text-inactive hover:text-text-secondary transition-colors flex-shrink-0",title:N("settings.title"),children:[(0,a.jsxs)("svg",{width:"15",height:"15",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("circle",{cx:"12",cy:"12",r:"3"}),(0,a.jsx)("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"})]}),K&&(0,a.jsx)("span",{className:"absolute -top-1 -right-1 w-2.5 h-2.5 bg-[#e94560] rounded-full border border-surface"})]}),(0,a.jsx)("button",{onClick:R,className:"text-text-inactive hover:text-[#e94560] transition-colors text-xs flex-shrink-0",title:"로그아웃",children:(0,a.jsxs)("svg",{width:"15",height:"15",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),(0,a.jsx)("polyline",{points:"16 17 21 12 16 7"}),(0,a.jsx)("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]})})]}),(0,a.jsxs)("div",{className:"mt-3 px-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,a.jsxs)("span",{className:"text-[9px] text-text-muted",children:[$(w)," / ",$(X)]}),(0,a.jsxs)("span",{className:"text-[9px] text-text-inactive",children:[Q.toFixed(0),"%"]})]}),(0,a.jsx)("div",{className:"w-full h-1.5 bg-border rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:"h-full rounded-full transition-all duration-500 ".concat(Q>90?"bg-[#e94560]":Q>70?"bg-amber-500":"bg-gradient-to-r from-[#e94560] to-[#533483]"),style:{width:"".concat(Q,"%")}})})]})]})]}),T&&(0,a.jsx)(p,{onClose:()=>B(!1)})]})}function j(e){let{children:t}=e,{user:s,loading:i}=(0,n.a)(),d=(0,r.useRouter)(),c=(0,r.usePathname)(),[o,x]=(0,l.useState)(!1);return((0,l.useEffect)(()=>{x(!1)},[c]),(0,l.useEffect)(()=>{i||s||d.replace("/login")},[s,i,d]),i)?(0,a.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-background",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-8 h-8 border-2 border-[#e94560] border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-text-secondary text-sm",children:"로딩 중..."})]})}):s?(0,a.jsxs)("div",{className:"flex h-screen overflow-hidden bg-background text-text-primary",style:{fontFamily:"'Pretendard Variable', -apple-system, sans-serif"},children:[(0,a.jsxs)("div",{className:"md:hidden fixed top-0 left-0 right-0 z-30 h-14 bg-background border-b border-border flex items-center px-4 gap-3 flex-shrink-0",children:[(0,a.jsxs)("button",{onClick:()=>x(!0),className:"w-9 h-9 flex flex-col items-center justify-center gap-1.5 rounded-lg text-text-secondary hover:bg-background-card transition-colors","aria-label":"메뉴 열기",children:[(0,a.jsx)("span",{className:"w-5 h-0.5 bg-current rounded-full"}),(0,a.jsx)("span",{className:"w-5 h-0.5 bg-current rounded-full"}),(0,a.jsx)("span",{className:"w-4 h-0.5 bg-current rounded-full"})]}),(0,a.jsx)("h1",{className:"text-lg font-extrabold bg-gradient-to-r from-text-primary to-[#e94560] bg-clip-text text-transparent",children:"AI Todo"})]}),(0,a.jsx)(g,{isOpen:o,onClose:()=>x(!1)}),(0,a.jsx)("main",{className:"flex-1 overflow-y-auto flex flex-col pt-14 md:pt-0 min-w-0",children:(0,a.jsx)("div",{className:"flex-1",children:t})})]}):null}},2052:function(e,t,s){"use strict";s.d(t,{P:function(){return o},a:function(){return x}});var a=s(7573),l=s(7653),r=s(6228),n=s(1926),i=s(4193);let d=(0,l.createContext)({tasks:[],lists:[],notes:[],folders:[],mindmaps:[],loading:!0,storageUsed:0});function c(e){return new Blob([e]).size}function o(e){let{children:t}=e,{user:s,loading:o}=(0,i.a)(),[x,u]=(0,l.useState)([]),[m,h]=(0,l.useState)([]),[b,f]=(0,l.useState)([]),[p,v]=(0,l.useState)([]),[g,j]=(0,l.useState)([]),[N,y]=(0,l.useState)(!0),w=(0,l.useRef)([]);(0,l.useEffect)(()=>{if(o)return;if(w.current.forEach(e=>e()),w.current=[],!s){u([]),h([]),f([]),v([]),j([]),y(!1);return}y(!0);let e=s.uid,t=0,a=()=>{++t>=5&&y(!1)},l=(0,r.cf)((0,r.IO)((0,r.hJ)(n.db,"users",e,"tasks"),(0,r.Xo)("createdAt","desc")),e=>{u(e.docs.map(e=>({id:e.id,...e.data()}))),a()},()=>a()),i=(0,r.cf)((0,r.hJ)(n.db,"users",e,"lists"),e=>{h(e.docs.map(e=>({id:e.id,...e.data()}))),a()},()=>a()),d=(0,r.cf)((0,r.IO)((0,r.hJ)(n.db,"users",e,"notes"),(0,r.Xo)("createdAt","desc")),e=>{f(e.docs.map(e=>({id:e.id,...e.data()}))),a()},()=>a()),c=(0,r.cf)((0,r.hJ)(n.db,"users",e,"folders"),e=>{v(e.docs.map(e=>({id:e.id,...e.data()}))),a()},()=>a()),x=(0,r.cf)((0,r.IO)((0,r.hJ)(n.db,"users",e,"mindmaps"),(0,r.Xo)("createdAt","desc")),e=>{j(e.docs.map(e=>({id:e.id,...e.data()}))),a()},()=>a());return w.current=[l,i,d,c,x],()=>{w.current.forEach(e=>e()),w.current=[]}},[s,o]);let k=function(e,t,s){var a,l,r,n;let i=0;for(let t of e){for(let e of(i+=c(t.title||"")+c(t.memo||""),null!==(a=t.subTasks)&&void 0!==a?a:[]))i+=c(e.title||"");for(let e of null!==(l=t.attachments)&&void 0!==l?l:[])i+=e.size}for(let e of t)for(let t of(i+=c(e.title||""),null!==(r=e.blocks)&&void 0!==r?r:[]))i+=c(t.content||"")+c(t.children||"");for(let e of s)for(let t of(i+=c(e.title||""),null!==(n=e.nodes)&&void 0!==n?n:[]))i+=c(t.text||""),t.imageSize&&(i+=t.imageSize);return i}(x,b,g);return(0,a.jsx)(d.Provider,{value:{tasks:x,lists:m,notes:b,folders:p,mindmaps:g,loading:N,storageUsed:k},children:t})}function x(){return(0,l.useContext)(d)}},8574:function(e,t,s){"use strict";s.d(t,{F:function(){return o},f:function(){return c}});var a=s(7573),l=s(7653),r=s(4193),n=s(6921);let i=(0,l.createContext)({theme:"system",setTheme:()=>{}});function d(e){let t=document.documentElement;if("light"===e)t.classList.add("light"),t.classList.remove("dark");else if("dark"===e)t.classList.add("dark"),t.classList.remove("light");else{let e=window.matchMedia("(prefers-color-scheme: dark)").matches;t.classList.toggle("dark",e),t.classList.toggle("light",!e)}}function c(e){let{children:t}=e,{user:s}=(0,r.a)(),[c,o]=(0,l.useState)("system");return(0,l.useEffect)(()=>{s&&(0,n.nS)(s.uid).then(e=>{o(e.theme),d(e.theme)})},[s]),(0,l.useEffect)(()=>{if("system"!==c)return;let e=window.matchMedia("(prefers-color-scheme: dark)"),t=()=>d("system");return e.addEventListener("change",t),()=>e.removeEventListener("change",t)},[c]),(0,a.jsx)(i.Provider,{value:{theme:c,setTheme:e=>{o(e),d(e),s&&(0,n.d2)(s.uid,{theme:e})}},children:t})}let o=()=>(0,l.useContext)(i)},1695:function(e,t,s){"use strict";var a=s(1219);s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})}},function(e){e.O(0,[301,787,226,340,937,293,528,744],function(){return e(e.s=8878)}),_N_E=e.O()}]);