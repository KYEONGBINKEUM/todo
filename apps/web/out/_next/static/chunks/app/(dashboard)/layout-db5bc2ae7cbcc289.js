(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[642],{317:function(e,t,s){Promise.resolve().then(s.bind(s,5397))},5397:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return g}});var a=s(6717),l=s(7387),r=s(8519),n=s(1097),i=s(4580),d=s.n(i),c=s(7541),o=s(9936),x=s(6813),u=s(1730);function m(e){document.documentElement.setAttribute("data-font",e)}let h=[{code:"ko",name:"한국어",flag:"\uD83C\uDDF0\uD83C\uDDF7"},{code:"en",name:"English",flag:"\uD83C\uDDFA\uD83C\uDDF8"},{code:"ja",name:"日本語",flag:"\uD83C\uDDEF\uD83C\uDDF5"},{code:"es",name:"Espa\xf1ol",flag:"\uD83C\uDDEA\uD83C\uDDF8"},{code:"pt",name:"Portugu\xeas",flag:"\uD83C\uDDE7\uD83C\uDDF7"},{code:"fr",name:"Fran\xe7ais",flag:"\uD83C\uDDEB\uD83C\uDDF7"}],b=[{value:"free",label:"Free",desc:"기본 기능 무제한",color:"#64748b"},{value:"pro",label:"Pro",desc:"AI + 10GB 스토리지",color:"#e94560"},{value:"team",label:"Team",desc:"무제한 협업 + 관리자 기능",color:"#8b5cf6"}];function f(e){var t,s,r,i,d,f;let{onClose:p}=e,{user:v}=(0,n.a)(),{theme:g,setTheme:j}=(0,c.F)(),{t:N,language:y,setLanguage:k}=(0,o.QT)(),{storageUsed:w}=(0,u.a)(),[D,C]=(0,l.useState)("account"),[F,S]=(0,l.useState)("medium"),[A,E]=(0,l.useState)("free"),[P,B]=(0,l.useState)(!1);(0,l.useEffect)(()=>{v&&(0,x.nS)(v.uid).then(e=>{var t;let s=null!==(t=e.fontSize)&&void 0!==t?t:"medium";S(s),m(s),E(e.plan||"free"),B(e.isAdmin||!1)})},[v]);let L=(0,x.ln)(A),z=Math.min(100,w/L*100),K=e=>e<1024?"".concat(e," B"):e<1048576?"".concat((e/1024).toFixed(1)," KB"):e<1073741824?"".concat((e/1048576).toFixed(1)," MB"):"".concat((e/1073741824).toFixed(1)," GB"),T=e=>{S(e),m(e),v&&(0,x.d2)(v.uid,{fontSize:e})},M=e=>{k(e)},I=e=>{E(e),v&&(0,x.d2)(v.uid,{plan:e})},R=[{id:"account",label:N("settings.account"),icon:"\uD83D\uDC64"},{id:"display",label:N("settings.display"),icon:"\uD83C\uDFA8"},{id:"language",label:N("settings.language"),icon:"\uD83C\uDF10"},{id:"info",label:N("settings.info"),icon:"ℹ️"}];return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"fixed inset-0 z-50 bg-black/50 backdrop-blur-sm",onClick:p}),(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"w-full max-w-lg bg-background-card border border-border rounded-2xl shadow-2xl overflow-hidden",onClick:e=>e.stopPropagation(),style:{animation:"fadeUp 0.2s ease-out"},children:[(0,a.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b border-border",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-lg",children:"⚙️"}),(0,a.jsx)("h2",{className:"text-base font-bold text-text-primary",children:N("settings.title")})]}),(0,a.jsx)("button",{onClick:p,className:"w-8 h-8 flex items-center justify-center rounded-lg text-text-muted hover:text-text-primary hover:bg-border transition-colors",children:(0,a.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",children:(0,a.jsx)("path",{d:"M1 1L13 13M13 1L1 13",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})})})]}),(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("div",{className:"w-32 border-r border-border py-4 flex-shrink-0",children:R.map(e=>(0,a.jsxs)("button",{onClick:()=>C(e.id),className:"w-full text-left px-4 py-2.5 text-xs font-semibold flex items-center gap-2 transition-colors ".concat(D===e.id?"text-[#e94560] bg-[#e94560]/10":"text-text-secondary hover:text-text-primary hover:bg-border/30"),children:[(0,a.jsx)("span",{children:e.icon}),e.label]},e.id))}),(0,a.jsxs)("div",{className:"flex-1 p-6 overflow-y-auto max-h-[60vh]",children:["account"===D&&(0,a.jsxs)("div",{className:"space-y-5",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-[10px] text-text-muted uppercase tracking-wider font-semibold mb-3",children:N("settings.profile")}),(0,a.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-background rounded-xl border border-border",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-[#e94560] to-[#533483] flex items-center justify-center text-white font-bold text-sm flex-shrink-0",children:null!==(f=null==v?void 0:null===(s=v.email)||void 0===s?void 0:null===(t=s[0])||void 0===t?void 0:t.toUpperCase())&&void 0!==f?f:"?"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-sm font-semibold text-text-primary truncate",children:(null==v?void 0:v.displayName)||"사용자"}),(0,a.jsx)("p",{className:"text-xs text-text-muted truncate",children:null==v?void 0:v.email})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-[10px] text-text-muted uppercase tracking-wider font-semibold mb-3",children:N("settings.plan")}),(0,a.jsxs)("div",{className:"p-4 bg-background rounded-xl border border-border",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("span",{className:"text-xs font-bold text-text-primary",children:["free"===A?"Free":"pro"===A?"Pro":"Team"," 플랜"]}),(0,a.jsx)("p",{className:"text-[11px] text-text-muted mt-0.5",children:null===(r=b.find(e=>e.value===A))||void 0===r?void 0:r.desc})]}),(0,a.jsx)("span",{className:"px-2 py-0.5 rounded-full text-[10px] font-bold",style:{color:null===(i=b.find(e=>e.value===A))||void 0===i?void 0:i.color,backgroundColor:"".concat(null===(d=b.find(e=>e.value===A))||void 0===d?void 0:d.color,"20")},children:N("settings.currentPlan")})]}),(0,a.jsx)("div",{className:"space-y-1.5 mb-4",children:[{label:"할일 목록 관리",included:!0},{label:"노트 작성",included:!0},{label:"기기 동기화",included:!0},{label:"AI 자동 작성/요약",included:"free"!==A},{label:"무제한 공유 협업",included:"team"===A},{label:"파일 스토리지 10GB",included:"free"!==A}].map(e=>(0,a.jsxs)("div",{className:"flex items-center gap-2 text-[11px]",children:[(0,a.jsx)("span",{className:e.included?"text-[#22c55e]":"text-text-inactive",children:e.included?"✓":"–"}),(0,a.jsx)("span",{className:e.included?"text-text-secondary":"text-text-inactive",children:e.label})]},e.label))}),P&&(0,a.jsxs)("div",{className:"mb-3 p-3 bg-amber-500/5 border border-amber-500/20 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)("span",{className:"text-xs",children:"\uD83D\uDD27"}),(0,a.jsx)("span",{className:"text-[10px] font-bold text-amber-500 uppercase tracking-wider",children:"관리자 전용"})]}),(0,a.jsx)("div",{className:"grid grid-cols-3 gap-2",children:b.map(e=>(0,a.jsxs)("button",{onClick:()=>I(e.value),className:"p-2 rounded-lg border text-center transition-all ".concat(A===e.value?"border-[#e94560] bg-[#e94560]/10":"border-border hover:border-border-hover"),children:[(0,a.jsx)("span",{className:"text-xs font-bold block",style:{color:e.color},children:e.label}),(0,a.jsx)("span",{className:"text-[9px] text-text-muted",children:e.desc})]},e.value))})]}),!P&&(0,a.jsxs)("button",{className:"w-full py-2.5 rounded-xl text-sm font-bold text-white bg-gradient-to-r from-amber-500 to-red-500 opacity-70 cursor-not-allowed",disabled:!0,children:[N("settings.upgrade")," (준비 중)"]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-[10px] text-text-muted uppercase tracking-wider font-semibold mb-3",children:"스토리지"}),(0,a.jsxs)("div",{className:"p-4 bg-background rounded-xl border border-border",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-xs text-text-secondary",children:"사용량"}),(0,a.jsxs)("span",{className:"text-xs font-bold text-text-primary",children:[K(w)," / ",K(L)]})]}),(0,a.jsx)("div",{className:"w-full h-2.5 bg-border rounded-full overflow-hidden mb-2",children:(0,a.jsx)("div",{className:"h-full rounded-full transition-all duration-500 ".concat(z>90?"bg-[#e94560]":z>70?"bg-amber-500":"bg-gradient-to-r from-[#e94560] to-[#533483]"),style:{width:"".concat(z,"%")}})}),(0,a.jsxs)("p",{className:"text-[10px] text-text-muted",children:["free"===A?"Free 플랜: 100 MB":"pro"===A?"Pro 플랜: 10 GB":"Team 플랜: 50 GB",z>90&&(0,a.jsx)("span",{className:"text-[#e94560] ml-1 font-semibold",children:"— 용량이 거의 찼습니다"})]})]})]})]}),"display"===D&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-[10px] text-text-muted uppercase tracking-wider font-semibold mb-3",children:N("nav.theme")}),(0,a.jsx)("div",{className:"grid grid-cols-3 gap-2",children:[{value:"system",label:N("nav.themeSystem"),icon:"\uD83D\uDDA5"},{value:"light",label:N("nav.themeLight"),icon:"☀️"},{value:"dark",label:N("nav.themeDark"),icon:"\uD83C\uDF19"}].map(e=>(0,a.jsxs)("button",{onClick:()=>j(e.value),className:"p-3 rounded-xl border text-center transition-all ".concat(g===e.value?"border-[#e94560] bg-[#e94560]/10 text-[#e94560]":"border-border text-text-secondary hover:border-border-hover"),children:[(0,a.jsx)("span",{className:"text-xl block mb-1",children:e.icon}),(0,a.jsx)("span",{className:"text-[11px] font-semibold",children:e.label})]},e.value))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-[10px] text-text-muted uppercase tracking-wider font-semibold mb-3",children:N("settings.fontSize")}),(0,a.jsx)("div",{className:"grid grid-cols-3 gap-2",children:[{value:"small",label:N("settings.fontSmall"),preview:"Aa",size:"text-xs"},{value:"medium",label:N("settings.fontMedium"),preview:"Aa",size:"text-sm"},{value:"large",label:N("settings.fontLarge"),preview:"Aa",size:"text-base"}].map(e=>(0,a.jsxs)("button",{onClick:()=>T(e.value),className:"p-3 rounded-xl border text-center transition-all ".concat(F===e.value?"border-[#e94560] bg-[#e94560]/10 text-[#e94560]":"border-border text-text-secondary hover:border-border-hover"),children:[(0,a.jsx)("span",{className:"".concat(e.size," font-bold block mb-1"),children:e.preview}),(0,a.jsx)("span",{className:"text-[11px] font-semibold",children:e.label})]},e.value))}),(0,a.jsxs)("p",{className:"text-[11px] text-text-muted mt-2",children:["현재: ","small"===F?"12px":"large"===F?"16px":"14px"]})]})]}),"language"===D&&(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-[10px] text-text-muted uppercase tracking-wider font-semibold mb-3",children:N("settings.language")}),(0,a.jsx)("p",{className:"text-[11px] text-text-muted mb-4",children:"접속 지역 및 IP 주소에 따라 자동으로 언어가 감지됩니다. 수동으로 변경할 수도 있습니다."}),(0,a.jsx)("div",{className:"space-y-2",children:h.map(e=>(0,a.jsxs)("button",{onClick:()=>M(e.code),className:"w-full flex items-center gap-3 p-3 rounded-xl border transition-all ".concat(y===e.code?"border-[#e94560] bg-[#e94560]/10":"border-border hover:border-border-hover"),children:[(0,a.jsx)("span",{className:"text-xl",children:e.flag}),(0,a.jsx)("span",{className:"text-sm font-semibold ".concat(y===e.code?"text-[#e94560]":"text-text-primary"),children:e.name}),y===e.code&&(0,a.jsx)("span",{className:"ml-auto text-[#e94560] text-sm",children:"✓"})]},e.code))})]})}),"info"===D&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"text-center py-4",children:[(0,a.jsx)("div",{className:"text-4xl mb-3",children:"✅"}),(0,a.jsx)("h3",{className:"text-lg font-extrabold text-text-primary mb-1",children:"AI Todo"}),(0,a.jsx)("p",{className:"text-xs text-text-muted",children:"버전 0.1.0 — MVP"})]}),(0,a.jsx)("div",{className:"space-y-2 text-xs text-text-secondary",children:[{label:"프레임워크",value:"Next.js 14 (App Router)"},{label:"데이터베이스",value:"Firebase Firestore"},{label:"인증",value:"Firebase Auth"},{label:"배포",value:"Cloudflare Pages"}].map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between py-2 border-b border-border/50",children:[(0,a.jsx)("span",{className:"text-text-muted",children:e.label}),(0,a.jsx)("span",{className:"font-medium text-text-primary",children:e.value})]},e.label))}),(0,a.jsx)("div",{className:"mt-4 p-3 bg-background rounded-xl border border-border text-[11px] text-text-muted text-center",children:"\xa9 2026 AI Todo \xb7 개인 프로젝트"})]})]})]})]})})]})}let p=["#e94560","#8b5cf6","#06b6d4","#22c55e","#f59e0b","#ec4899"];function v(e){let{isOpen:t=!1,onClose:s}=e,i=(0,r.usePathname)(),m=(0,r.useRouter)(),{user:h,signOut:b}=(0,n.a)(),{theme:v,setTheme:g}=(0,c.F)(),{t:j}=(0,o.QT)(),{lists:N,storageUsed:y}=(0,u.a)(),[k,w]=(0,l.useState)([]),[D,C]=(0,l.useState)(null),[F,S]=(0,l.useState)(""),[A,E]=(0,l.useState)(!1),[P,B]=(0,l.useState)(""),[L,z]=(0,l.useState)(!1),[K,T]=(0,l.useState)("free");(0,l.useEffect)(()=>{w(N)},[N]),(0,l.useEffect)(()=>{h&&(0,x.nS)(h.uid).then(e=>{T(e.plan||"free")}).catch(()=>{})},[h]);let M=async()=>{await b(),m.push("/login")},I=async e=>{w(t=>t.filter(t=>t.id!==e));try{await (0,x.SN)(h.uid,e)}catch(e){console.error("Failed to delete list:",e)}},R=async e=>{if(!h||!F.trim()){C(null);return}w(t=>t.map(t=>t.id===e?{...t,label:F.trim()}:t)),C(null);try{await (0,x.s9)(h.uid,e,{label:F.trim()})}catch(e){console.error("Failed to rename list:",e)}},G=async()=>{if(!h||!P.trim()){E(!1);return}let e=p[k.length%p.length],t=P.trim();B(""),E(!1);try{await (0,x.$8)(h.uid,{label:t,color:e})}catch(e){console.error("Failed to add list:",e)}},_=(null==h?void 0:h.displayName)||"사용자",O=null==h?void 0:h.photoURL,U=_.charAt(0).toUpperCase(),V="free"===K?j("freePlan"):"pro"===K?"Pro Plan":"Team Plan",J=(0,x.ln)(K),W=Math.min(100,y/J*100),H=e=>e<1024?"".concat(e," B"):e<1048576?"".concat((e/1024).toFixed(1)," KB"):e<1073741824?"".concat((e/1048576).toFixed(1)," MB"):"".concat((e/1073741824).toFixed(1)," GB");return(0,a.jsxs)(a.Fragment,{children:[t&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 z-40 md:hidden",onClick:s}),(0,a.jsxs)("aside",{className:"\n        w-64 border-r border-border bg-background p-6 flex flex-col flex-shrink-0\n        fixed top-0 left-0 h-full z-50\n        md:static md:h-full md:z-auto\n        transition-transform duration-300 ease-in-out\n        ".concat(t?"translate-x-0":"-translate-x-full md:translate-x-0","\n      "),children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)(d(),{href:"/my-day",children:(0,a.jsx)("h1",{className:"text-xl font-extrabold bg-gradient-to-r from-text-primary to-[#e94560] bg-clip-text text-transparent",children:"AI Todo"})}),(0,a.jsx)("p",{className:"text-[10px] text-text-muted mt-1 uppercase tracking-widest",children:"Digital Assistant"})]}),(0,a.jsx)("nav",{className:"flex-shrink-0 space-y-1",children:[{icon:"☀️",labelKey:"nav.myDay",href:"/my-day"},{icon:"\uD83D\uDCCB",labelKey:"nav.allTasks",href:"/tasks"},{icon:"\uD83D\uDCC5",labelKey:"nav.upcoming",href:"/upcoming"},{icon:"\uD83D\uDCDD",labelKey:"nav.notes",href:"/notes"},{icon:"⭐",labelKey:"nav.important",href:"/important"}].map(e=>{let t=i===e.href||"/tasks"===e.href&&(null==i?void 0:i.startsWith("/tasks"));return(0,a.jsxs)(d(),{href:e.href,className:"w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm transition-all ".concat(t?"bg-[#e94560]/10 text-[#e94560] font-semibold":"text-text-secondary hover:bg-background-card hover:text-text-primary"),children:[(0,a.jsx)("span",{className:"text-base",children:e.icon}),(0,a.jsx)("span",{className:"flex-1 text-left",children:j(e.labelKey)})]},e.href)})}),(0,a.jsxs)("div",{className:"mt-4 flex-1 min-h-0 overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsx)("span",{className:"text-[10px] text-text-muted uppercase tracking-widest font-semibold",children:j("nav.lists")}),(0,a.jsx)("button",{onClick:()=>E(!A),className:"text-text-inactive hover:text-[#e94560] transition-colors text-sm",title:j("common.add"),children:"+"})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[k.map(e=>(0,a.jsxs)("div",{className:"group w-full flex items-center gap-3 px-3 py-2 rounded-lg text-sm text-text-secondary hover:bg-background-card hover:text-text-primary transition-all",children:[(0,a.jsx)("span",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:e.color}}),D===e.id?(0,a.jsx)("input",{value:F,onChange:e=>S(e.target.value),onBlur:()=>R(e.id),onKeyDown:t=>{"Enter"===t.key&&R(e.id),"Escape"===t.key&&C(null)},autoFocus:!0,className:"flex-1 bg-transparent text-text-primary text-sm outline-none border-b border-[#e94560]"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d(),{href:"/tasks?list=".concat(e.id),className:"flex-1 cursor-pointer truncate",children:e.label}),(0,a.jsxs)("div",{className:"flex items-center gap-0.5 opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0",children:[(0,a.jsx)("button",{onClick:t=>{t.preventDefault(),C(e.id),S(e.label)},className:"w-5 h-5 flex items-center justify-center text-text-inactive hover:text-text-secondary transition-colors text-[11px]",title:"이름 변경",children:"✏️"}),(0,a.jsx)("button",{onClick:t=>{t.preventDefault(),I(e.id)},className:"w-5 h-5 flex items-center justify-center text-text-inactive hover:text-[#e94560] transition-colors text-sm",title:"목록 삭제",children:"\xd7"})]})]})]},e.id)),A&&(0,a.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1.5",children:[(0,a.jsx)("span",{className:"w-3 h-3 rounded-full flex-shrink-0 bg-[#e94560]"}),(0,a.jsx)("input",{value:P,onChange:e=>B(e.target.value),onKeyDown:e=>{"Enter"===e.key&&G(),"Escape"===e.key&&E(!1)},onBlur:G,placeholder:"목록 이름...",autoFocus:!0,className:"flex-1 bg-transparent text-text-primary text-sm placeholder-text-muted outline-none border-b border-[#e94560]"})]})]})]}),(0,a.jsxs)("div",{className:"mt-6 pt-4 border-t border-border flex-shrink-0",children:[(0,a.jsx)("p",{className:"text-[10px] text-text-muted uppercase tracking-widest font-semibold mb-2",children:j("nav.theme")}),(0,a.jsx)("div",{className:"flex gap-1",children:[{value:"system",icon:"\uD83D\uDDA5",labelKey:"nav.themeSystem"},{value:"light",icon:"☀️",labelKey:"nav.themeLight"},{value:"dark",icon:"\uD83C\uDF19",labelKey:"nav.themeDark"}].map(e=>(0,a.jsxs)("button",{onClick:()=>g(e.value),title:j(e.labelKey),className:"flex-1 flex flex-col items-center gap-0.5 py-1.5 rounded-lg text-xs transition-all ".concat(v===e.value?"bg-[#e94560]/15 text-[#e94560] font-semibold":"text-text-secondary hover:bg-background-card hover:text-text-primary"),children:[(0,a.jsx)("span",{children:e.icon}),(0,a.jsx)("span",{className:"text-[9px]",children:j(e.labelKey)})]},e.value))})]}),(0,a.jsxs)("div",{className:"mt-4 pt-4 border-t border-border flex-shrink-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 px-2",children:[O?(0,a.jsx)("img",{src:O,alt:_,className:"w-8 h-8 rounded-full flex-shrink-0",referrerPolicy:"no-referrer"}):(0,a.jsx)("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-[#e94560] to-[#533483] flex items-center justify-center text-xs font-bold text-white flex-shrink-0",children:U}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-sm font-semibold text-text-primary truncate",children:_}),(0,a.jsx)("p",{className:"text-[10px] text-text-muted",children:V})]}),(0,a.jsx)("button",{onClick:()=>z(!0),className:"text-text-inactive hover:text-text-secondary transition-colors flex-shrink-0",title:j("settings.title"),children:(0,a.jsxs)("svg",{width:"15",height:"15",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("circle",{cx:"12",cy:"12",r:"3"}),(0,a.jsx)("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"})]})}),(0,a.jsx)("button",{onClick:M,className:"text-text-inactive hover:text-[#e94560] transition-colors text-xs flex-shrink-0",title:"로그아웃",children:(0,a.jsxs)("svg",{width:"15",height:"15",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),(0,a.jsx)("polyline",{points:"16 17 21 12 16 7"}),(0,a.jsx)("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]})})]}),(0,a.jsxs)("div",{className:"mt-3 px-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,a.jsxs)("span",{className:"text-[9px] text-text-muted",children:[H(y)," / ",H(J)]}),(0,a.jsxs)("span",{className:"text-[9px] text-text-inactive",children:[W.toFixed(0),"%"]})]}),(0,a.jsx)("div",{className:"w-full h-1.5 bg-border rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:"h-full rounded-full transition-all duration-500 ".concat(W>90?"bg-[#e94560]":W>70?"bg-amber-500":"bg-gradient-to-r from-[#e94560] to-[#533483]"),style:{width:"".concat(W,"%")}})})]})]})]}),L&&(0,a.jsx)(f,{onClose:()=>z(!1)})]})}function g(e){let{children:t}=e,{user:s,loading:i}=(0,n.a)(),d=(0,r.useRouter)(),c=(0,r.usePathname)(),[o,x]=(0,l.useState)(!1);return((0,l.useEffect)(()=>{x(!1)},[c]),(0,l.useEffect)(()=>{i||s||d.replace("/login")},[s,i,d]),i)?(0,a.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-background",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-8 h-8 border-2 border-[#e94560] border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-text-secondary text-sm",children:"로딩 중..."})]})}):s?(0,a.jsxs)("div",{className:"flex h-screen overflow-hidden bg-background text-text-primary",style:{fontFamily:"'Pretendard Variable', -apple-system, sans-serif"},children:[(0,a.jsxs)("div",{className:"md:hidden fixed top-0 left-0 right-0 z-30 h-14 bg-background border-b border-border flex items-center px-4 gap-3 flex-shrink-0",children:[(0,a.jsxs)("button",{onClick:()=>x(!0),className:"w-9 h-9 flex flex-col items-center justify-center gap-1.5 rounded-lg text-text-secondary hover:bg-background-card transition-colors","aria-label":"메뉴 열기",children:[(0,a.jsx)("span",{className:"w-5 h-0.5 bg-current rounded-full"}),(0,a.jsx)("span",{className:"w-5 h-0.5 bg-current rounded-full"}),(0,a.jsx)("span",{className:"w-4 h-0.5 bg-current rounded-full"})]}),(0,a.jsx)("h1",{className:"text-lg font-extrabold bg-gradient-to-r from-text-primary to-[#e94560] bg-clip-text text-transparent",children:"AI Todo"})]}),(0,a.jsx)(v,{isOpen:o,onClose:()=>x(!1)}),(0,a.jsx)("main",{className:"flex-1 overflow-y-auto flex flex-col pt-14 md:pt-0 min-w-0",children:(0,a.jsx)("div",{className:"flex-1",children:t})})]}):null}},1730:function(e,t,s){"use strict";s.d(t,{P:function(){return o},a:function(){return x}});var a=s(6717),l=s(7387),r=s(7253),n=s(1579),i=s(1097);let d=(0,l.createContext)({tasks:[],lists:[],notes:[],folders:[],loading:!0,storageUsed:0});function c(e){return new Blob([e]).size}function o(e){let{children:t}=e,{user:s,loading:o}=(0,i.a)(),[x,u]=(0,l.useState)([]),[m,h]=(0,l.useState)([]),[b,f]=(0,l.useState)([]),[p,v]=(0,l.useState)([]),[g,j]=(0,l.useState)(!0),N=(0,l.useRef)([]);(0,l.useEffect)(()=>{if(o)return;if(N.current.forEach(e=>e()),N.current=[],!s){u([]),h([]),f([]),v([]),j(!1);return}j(!0);let e=s.uid,t=0,a=()=>{++t>=4&&j(!1)},l=(0,r.cf)((0,r.IO)((0,r.hJ)(n.db,"users",e,"tasks"),(0,r.Xo)("createdAt","desc")),e=>{u(e.docs.map(e=>({id:e.id,...e.data()}))),a()},()=>a()),i=(0,r.cf)((0,r.hJ)(n.db,"users",e,"lists"),e=>{h(e.docs.map(e=>({id:e.id,...e.data()}))),a()},()=>a()),d=(0,r.cf)((0,r.IO)((0,r.hJ)(n.db,"users",e,"notes"),(0,r.Xo)("createdAt","desc")),e=>{f(e.docs.map(e=>({id:e.id,...e.data()}))),a()},()=>a()),c=(0,r.cf)((0,r.hJ)(n.db,"users",e,"folders"),e=>{v(e.docs.map(e=>({id:e.id,...e.data()}))),a()},()=>a());return N.current=[l,i,d,c],()=>{N.current.forEach(e=>e()),N.current=[]}},[s,o]);let y=function(e,t){var s,a,l;let r=0;for(let t of e){for(let e of(r+=c(t.title||"")+c(t.memo||""),null!==(s=t.subTasks)&&void 0!==s?s:[]))r+=c(e.title||"");for(let e of null!==(a=t.attachments)&&void 0!==a?a:[])r+=e.size}for(let e of t)for(let t of(r+=c(e.title||""),null!==(l=e.blocks)&&void 0!==l?l:[]))r+=c(t.content||"")+c(t.children||"");return r}(x,b);return(0,a.jsx)(d.Provider,{value:{tasks:x,lists:m,notes:b,folders:p,loading:g,storageUsed:y},children:t})}function x(){return(0,l.useContext)(d)}},7541:function(e,t,s){"use strict";s.d(t,{F:function(){return o},f:function(){return c}});var a=s(6717),l=s(7387),r=s(1097),n=s(6813);let i=(0,l.createContext)({theme:"system",setTheme:()=>{}});function d(e){let t=document.documentElement;if("light"===e)t.classList.add("light"),t.classList.remove("dark");else if("dark"===e)t.classList.add("dark"),t.classList.remove("light");else{let e=window.matchMedia("(prefers-color-scheme: dark)").matches;t.classList.toggle("dark",e),t.classList.toggle("light",!e)}}function c(e){let{children:t}=e,{user:s}=(0,r.a)(),[c,o]=(0,l.useState)("system");return(0,l.useEffect)(()=>{s&&(0,n.nS)(s.uid).then(e=>{o(e.theme),d(e.theme)})},[s]),(0,l.useEffect)(()=>{if("system"!==c)return;let e=window.matchMedia("(prefers-color-scheme: dark)"),t=()=>d("system");return e.addEventListener("change",t),()=>e.removeEventListener("change",t)},[c]),(0,a.jsx)(i.Provider,{value:{theme:c,setTheme:e=>{o(e),d(e),s&&(0,n.d2)(s.uid,{theme:e})}},children:t})}let o=()=>(0,l.useContext)(i)},8519:function(e,t,s){"use strict";var a=s(5878);s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})}},function(e){e.O(0,[815,419,412,580,936,407,809,744],function(){return e(e.s=317)}),_N_E=e.O()}]);