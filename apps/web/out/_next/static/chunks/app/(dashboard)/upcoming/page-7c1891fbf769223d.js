(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[62],{4569:function(e,t,r){Promise.resolve().then(r.bind(r,7664))},7664:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return d}});var s=r(6717),n=r(7387),o=r(1097),a=r(9936),i=r(6813);let l=[{key:"overdue",icon:"⚠️",i18nKey:"upcoming.overdue"},{key:"today",icon:"\uD83D\uDCCC",i18nKey:"upcoming.today"},{key:"tomorrow",icon:"\uD83D\uDD1C",i18nKey:"upcoming.tomorrow"},{key:"thisWeek",icon:"\uD83D\uDCC5",i18nKey:"upcoming.thisWeek"},{key:"thisMonth",icon:"\uD83D\uDCC6",i18nKey:"upcoming.thisMonth"},{key:"later",icon:"\uD83D\uDDD3️",i18nKey:"upcoming.later"}];function d(){let{user:e}=(0,o.a)(),{t}=(0,a.QT)(),[r,d]=(0,n.useState)([]),[u,x]=(0,n.useState)([]),[m,h]=(0,n.useState)(!0),b=(0,n.useCallback)(async()=>{if(e)try{let[t,r]=await Promise.all([(0,i.Ak)(e.uid),(0,i.yr)(e.uid)]);d(t.filter(e=>e.dueDate)),x(r)}catch(e){console.error("Failed to load:",e)}finally{h(!1)}},[e]);(0,n.useEffect)(()=>{b()},[b]);let p=function(e){let t={},r=new Date;for(let s of(r.setHours(0,0,0,0),e)){let e;if(!s.dueDate)continue;let n=new Date(s.dueDate);n.setHours(0,0,0,0);let o=Math.ceil((n.getTime()-r.getTime())/864e5);t[e=o<0?"overdue":0===o?"today":1===o?"tomorrow":o<=7?"thisWeek":o<=30?"thisMonth":"later"]||(t[e]=[]),t[e].push(s)}return t}(r),y=async t=>{if(!e||!t.id)return;let r="completed"===t.status?"todo":"completed";d(e=>e.map(e=>e.id===t.id?{...e,status:r}:e)),await (0,i.xJ)(e.uid,t.id,{status:r})},g=async t=>{e&&t.id&&(d(e=>e.map(e=>e.id===t.id?{...e,starred:!e.starred}:e)),await (0,i.xJ)(e.uid,t.id,{starred:!t.starred}))},f=e=>u.find(t=>t.id===e)||{label:"Tasks",color:"#e94560"};return m?(0,s.jsx)("div",{className:"p-8 flex items-center justify-center min-h-[50vh]",children:(0,s.jsx)("div",{className:"w-6 h-6 border-2 border-[#e94560] border-t-transparent rounded-full animate-spin"})}):(0,s.jsx)("div",{className:"p-8",children:(0,s.jsxs)("div",{className:"max-w-3xl mx-auto",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,s.jsx)("span",{className:"text-3xl",children:"\uD83D\uDCC5"}),(0,s.jsx)("h2",{className:"text-3xl font-extrabold text-text-primary",children:t("upcoming.title")})]}),(0,s.jsx)("p",{className:"text-text-secondary text-sm",children:t("upcoming.desc")})]}),l.map(e=>{let r=p[e.key];if(!r||0===r.length)return null;let n="overdue"===e.key;return(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,s.jsxs)("h3",{className:"text-sm font-bold ".concat(n?"text-red-400":"text-text-secondary"),children:[e.icon," ",t(e.i18nKey)]}),(0,s.jsx)("span",{className:"text-[10px] text-text-muted bg-border px-2 py-0.5 rounded-full",children:r.length})]}),(0,s.jsx)("div",{className:"space-y-2",children:r.map((e,r)=>{let o=e.priority,a=f(e.listId),i="completed"===e.status;return(0,s.jsxs)("div",{className:"group flex items-center gap-3 p-4 bg-background-card border rounded-xl hover:border-border-hover transition-all ".concat(n&&!i?"border-red-500/20":i?"border-border/50 opacity-60":"border-border"),style:{animation:"fadeUp 0.4s ease-out both",animationDelay:"".concat(.03*r,"s")},children:[(0,s.jsx)("button",{onClick:()=>y(e),className:"w-6 h-6 rounded-md border-2 flex items-center justify-center transition-all duration-300 flex-shrink-0 ".concat(i?"bg-gradient-to-br from-[#e94560] to-[#533483] border-transparent scale-110":"hover:border-[#e94560] hover:shadow-[0_0_8px_rgba(233,69,96,0.3)]"),style:i?void 0:{borderColor:"var(--color-checkbox-border)"},children:i&&(0,s.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",children:(0,s.jsx)("path",{d:"M3 7L6 10L11 4",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),(0,s.jsx)("span",{className:"w-1.5 h-8 rounded-full flex-shrink-0",style:{backgroundColor:a.color}}),(0,s.jsx)("span",{className:"flex-1 text-sm transition-all ".concat(i?"line-through text-text-inactive":"text-text-primary"),children:e.title}),(0,s.jsx)("span",{className:"text-[10px] ".concat(n?"text-red-400":"text-text-muted"),children:e.dueDate.slice(5).replace("-","/")}),(0,s.jsx)("span",{className:"px-2 py-0.5 rounded text-[10px] font-semibold border ".concat(c(o).bg," ").concat(c(o).text," ").concat(c(o).border),children:t("priority.".concat(o))}),(0,s.jsx)("button",{onClick:()=>g(e),className:"text-lg transition-all flex-shrink-0 ".concat(e.starred?"text-amber-400 drop-shadow-[0_0_4px_rgba(251,191,36,0.5)]":"text-text-inactive hover:text-amber-400/60"),children:e.starred?"★":"☆"})]},e.id)})})]},e.key)}),0===r.length&&(0,s.jsxs)("div",{className:"text-center py-16",children:[(0,s.jsx)("div",{className:"text-5xl mb-4",children:"\uD83D\uDCED"}),(0,s.jsx)("p",{className:"text-text-secondary font-semibold",children:t("upcoming.empty")}),(0,s.jsx)("p",{className:"text-text-muted text-sm mt-1",children:t("upcoming.emptyHint")})]})]})})}function c(e){let t={urgent:{bg:"bg-red-500/20",text:"text-red-400",border:"border-red-500/30"},high:{bg:"bg-orange-500/20",text:"text-orange-400",border:"border-orange-500/30"},medium:{bg:"bg-yellow-500/20",text:"text-yellow-400",border:"border-yellow-500/30"},low:{bg:"bg-blue-500/20",text:"text-blue-400",border:"border-blue-500/30"}};return t[e]||t.medium}}},function(e){e.O(0,[815,419,994,936,407,809,744],function(){return e(e.s=4569)}),_N_E=e.O()}]);