(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[62],{6107:function(e,t,r){Promise.resolve().then(r.bind(r,6646))},6646:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return d}});var a=r(7573),s=r(7653),o=r(4193),n=r(9937),i=r(6921);let l=[{key:"overdue",icon:"⚠️",i18nKey:"upcoming.overdue"},{key:"today",icon:"\uD83D\uDCCC",i18nKey:"upcoming.today"},{key:"tomorrow",icon:"\uD83D\uDD1C",i18nKey:"upcoming.tomorrow"},{key:"thisWeek",icon:"\uD83D\uDCC5",i18nKey:"upcoming.thisWeek"},{key:"thisMonth",icon:"\uD83D\uDCC6",i18nKey:"upcoming.thisMonth"},{key:"later",icon:"\uD83D\uDDD3️",i18nKey:"upcoming.later"}];function d(){let{user:e}=(0,o.a)(),{t}=(0,n.QT)(),[r,d]=(0,s.useState)([]),[u,x]=(0,s.useState)([]),[m,p]=(0,s.useState)(!0),[h,b]=(0,s.useState)(""),[g,y]=(0,s.useState)("medium"),[f,j]=(0,s.useState)(""),[v,N]=(0,s.useState)(!1),[k,D]=(0,s.useState)(!0),w=(0,s.useCallback)(async()=>{if(e)try{let[t,r]=await Promise.all([(0,i.Ak)(e.uid),(0,i.yr)(e.uid)]);d(t.filter(e=>e.dueDate)),x(r),r.length>0&&!f&&j(r[0].id)}catch(e){console.error("Failed to load:",e)}finally{p(!1)}},[e]);(0,s.useEffect)(()=>{w()},[w]);let C=function(e){let t={},r=new Date;for(let a of(r.setHours(0,0,0,0),e)){let e;if(!a.dueDate)continue;let s=new Date(a.dueDate);s.setHours(0,0,0,0);let o=Math.ceil((s.getTime()-r.getTime())/864e5);t[e=o<0?"overdue":0===o?"today":1===o?"tomorrow":o<=7?"thisWeek":o<=30?"thisMonth":"later"]||(t[e]=[]),t[e].push(a)}return t}(r),_=async()=>{var t;if(!h.trim()||!e||v)return;N(!0);let r=h.trim(),a=new Date().toISOString().split("T")[0],s="temp-".concat(Date.now()),o={title:r,status:"todo",priority:g,starred:!1,listId:f||(null===(t=u[0])||void 0===t?void 0:t.id)||"",myDay:!1,tags:[],dueDate:a};d(e=>[{...o,id:s},...e]),b("");try{let t=await (0,i.gI)(e.uid,o);d(e=>e.map(e=>e.id===s?{...e,id:t}:e))}catch(e){d(e=>e.filter(e=>e.id!==s))}finally{N(!1)}},S=async t=>{if(!e||!t.id)return;let r="completed"===t.status?"todo":"completed";d(e=>e.map(e=>e.id===t.id?{...e,status:r}:e)),await (0,i.xJ)(e.uid,t.id,{status:r})},K=async t=>{e&&t.id&&(d(e=>e.map(e=>e.id===t.id?{...e,starred:!e.starred}:e)),await (0,i.xJ)(e.uid,t.id,{starred:!t.starred}))},E=e=>u.find(t=>t.id===e)||{label:"Tasks",color:"#e94560"};return m?(0,a.jsx)("div",{className:"p-8 flex items-center justify-center min-h-[50vh]",children:(0,a.jsx)("div",{className:"w-6 h-6 border-2 border-[#e94560] border-t-transparent rounded-full animate-spin"})}):(0,a.jsx)("div",{className:"p-4 md:p-8",children:(0,a.jsxs)("div",{className:"max-w-3xl mx-auto",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,a.jsx)("span",{className:"text-3xl",children:"\uD83D\uDCC5"}),(0,a.jsx)("h2",{className:"text-3xl font-extrabold text-text-primary",children:t("upcoming.title")})]}),(0,a.jsx)("p",{className:"text-text-secondary text-sm",children:t("upcoming.desc")})]}),(0,a.jsxs)("div",{className:"mb-6 flex gap-2",children:[(0,a.jsxs)("div",{className:"flex-1 flex bg-background-card border border-border rounded-xl overflow-hidden focus-within:border-[#e94560] transition-colors",children:[(0,a.jsx)("input",{type:"text",value:h,onChange:e=>b(e.target.value),onKeyDown:e=>"Enter"===e.key&&_(),placeholder:t("myDay.addTask"),className:"flex-1 px-4 py-3 bg-transparent text-text-primary placeholder-text-muted text-sm focus:outline-none"}),(0,a.jsxs)("select",{value:g,onChange:e=>y(e.target.value),className:"px-2 bg-transparent text-xs border-l border-border focus:outline-none cursor-pointer text-text-secondary",children:[(0,a.jsx)("option",{value:"urgent",className:"bg-background-card",children:t("priority.urgent")}),(0,a.jsx)("option",{value:"high",className:"bg-background-card",children:t("priority.high")}),(0,a.jsx)("option",{value:"medium",className:"bg-background-card",children:t("priority.medium")}),(0,a.jsx)("option",{value:"low",className:"bg-background-card",children:t("priority.low")})]}),(0,a.jsx)("select",{value:f,onChange:e=>j(e.target.value),className:"px-2 bg-transparent text-text-secondary text-xs border-l border-border focus:outline-none cursor-pointer",children:u.map(e=>(0,a.jsx)("option",{value:e.id,className:"bg-background-card",children:e.label},e.id))})]}),(0,a.jsx)("button",{onClick:_,disabled:v,className:"px-5 py-3 bg-[#e94560] hover:bg-[#ff5a7a] text-white font-semibold rounded-xl text-sm transition-colors disabled:opacity-50",children:v?"...":t("common.add")})]}),l.map(e=>{let r=C[e.key];if(!r||0===r.length)return null;let s="overdue"===e.key,o=r.filter(e=>"completed"!==e.status),n=r.filter(e=>"completed"===e.status);return 0===o.length&&0===n.length?null:(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,a.jsxs)("h3",{className:"text-sm font-bold ".concat(s?"text-red-400":"text-text-secondary"),children:[e.icon," ",t(e.i18nKey)]}),(0,a.jsx)("span",{className:"text-[10px] text-text-muted bg-border px-2 py-0.5 rounded-full",children:o.length})]}),(0,a.jsx)("div",{className:"space-y-2",children:o.map((e,r)=>{let o=E(e.listId);return(0,a.jsxs)("div",{className:"group flex items-center gap-3 p-4 bg-background-card border rounded-xl hover:border-border-hover transition-all ".concat(s?"border-red-500/20":"border-border"),style:{animation:"fadeUp 0.4s ease-out both",animationDelay:"".concat(.03*r,"s")},children:[(0,a.jsx)("button",{onClick:()=>S(e),className:"w-6 h-6 rounded-md border-2 flex items-center justify-center transition-all duration-300 flex-shrink-0 hover:border-[#e94560] hover:shadow-[0_0_8px_rgba(233,69,96,0.3)]",style:{borderColor:"var(--color-checkbox-border)"}}),(0,a.jsx)("span",{className:"w-1.5 h-8 rounded-full flex-shrink-0",style:{backgroundColor:o.color}}),(0,a.jsx)("span",{className:"flex-1 text-sm text-text-primary",children:e.title}),(0,a.jsx)("span",{className:"text-[10px] ".concat(s?"text-red-400":"text-text-muted"),children:e.dueDate.slice(5).replace("-","/")}),(0,a.jsx)("span",{className:"px-2 py-0.5 rounded text-[10px] font-semibold border ".concat(c(e.priority).bg," ").concat(c(e.priority).text," ").concat(c(e.priority).border),children:t("priority.".concat(e.priority))}),(0,a.jsx)("button",{onClick:()=>K(e),className:"text-lg transition-all flex-shrink-0 ".concat(e.starred?"text-amber-400 drop-shadow-[0_0_4px_rgba(251,191,36,0.5)]":"text-text-inactive hover:text-amber-400/60"),children:e.starred?"★":"☆"})]},e.id)})})]},e.key)}),0===r.filter(e=>"completed"!==e.status).length&&0===r.length&&(0,a.jsxs)("div",{className:"text-center py-16",children:[(0,a.jsx)("div",{className:"text-5xl mb-4",children:"\uD83D\uDCED"}),(0,a.jsx)("p",{className:"text-text-secondary font-semibold",children:t("upcoming.empty")}),(0,a.jsx)("p",{className:"text-text-muted text-sm mt-1",children:t("upcoming.emptyHint")})]}),r.filter(e=>"completed"===e.status).length>0&&(0,a.jsxs)("div",{className:"mt-6",children:[(0,a.jsxs)("button",{onClick:()=>D(!k),className:"flex items-center gap-2 text-text-muted text-sm mb-3 hover:text-text-secondary transition-colors w-full",children:[(0,a.jsx)("span",{className:"transition-transform duration-200 text-xs ".concat(k?"rotate-90":""),children:"▶"}),(0,a.jsx)("span",{className:"font-semibold",children:t("status.completed")}),(0,a.jsx)("span",{className:"text-[10px] bg-border px-2 py-0.5 rounded-full",children:r.filter(e=>"completed"===e.status).length})]}),k&&(0,a.jsx)("div",{className:"space-y-2",children:r.filter(e=>"completed"===e.status).map((e,r)=>{let s=E(e.listId);return(0,a.jsxs)("div",{className:"group flex items-center gap-3 p-4 bg-background-card border border-border/50 rounded-xl opacity-60 hover:opacity-80 transition-all",style:{animation:"fadeUp 0.3s ease-out both",animationDelay:"".concat(.03*r,"s")},children:[(0,a.jsx)("button",{onClick:()=>S(e),className:"w-6 h-6 rounded-md border-2 flex items-center justify-center transition-all duration-300 flex-shrink-0 bg-gradient-to-br from-[#e94560] to-[#533483] border-transparent",children:(0,a.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",children:(0,a.jsx)("path",{d:"M3 7L6 10L11 4",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),(0,a.jsx)("span",{className:"w-1.5 h-8 rounded-full flex-shrink-0",style:{backgroundColor:s.color}}),(0,a.jsx)("span",{className:"flex-1 text-sm line-through text-text-inactive",children:e.title}),e.dueDate&&(0,a.jsx)("span",{className:"text-[10px] text-text-muted",children:e.dueDate.slice(5).replace("-","/")}),(0,a.jsx)("span",{className:"px-2 py-0.5 rounded text-[10px] font-semibold border ".concat(c(e.priority).bg," ").concat(c(e.priority).text," ").concat(c(e.priority).border),children:t("priority.".concat(e.priority))})]},e.id)})})]})]})})}function c(e){let t={urgent:{bg:"bg-red-500/20",text:"text-red-400",border:"border-red-500/30"},high:{bg:"bg-orange-500/20",text:"text-orange-400",border:"border-orange-500/30"},medium:{bg:"bg-yellow-500/20",text:"text-yellow-400",border:"border-yellow-500/30"},low:{bg:"bg-blue-500/20",text:"text-blue-400",border:"border-blue-500/30"}};return t[e]||t.medium}}},function(e){e.O(0,[301,787,419,937,293,528,744],function(){return e(e.s=6107)}),_N_E=e.O()}]);