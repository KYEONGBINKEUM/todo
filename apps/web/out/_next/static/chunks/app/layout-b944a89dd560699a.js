(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{971:function(e,t,s){Promise.resolve().then(s.t.bind(s,5646,23)),Promise.resolve().then(s.bind(s,9551))},9551:function(e,t,s){"use strict";s.d(t,{Providers:function(){return d}});var r=s(7573),n=s(4193),c=s(8574),i=s(9937),u=s(2052);function d(e){let{children:t}=e;return(0,r.jsx)(n.H,{children:(0,r.jsx)(c.f,{children:(0,r.jsx)(i.bd,{children:(0,r.jsx)(u.P,{children:t})})})})}},2052:function(e,t,s){"use strict";s.d(t,{P:function(){return a},a:function(){return o}});var r=s(7573),n=s(7653),c=s(6228),i=s(1926),u=s(4193);let d=(0,n.createContext)({tasks:[],lists:[],notes:[],folders:[],loading:!0});function a(e){let{children:t}=e,{user:s,loading:a}=(0,u.a)(),[o,l]=(0,n.useState)([]),[f,h]=(0,n.useState)([]),[m,v]=(0,n.useState)([]),[g,k]=(0,n.useState)([]),[E,x]=(0,n.useState)(!0),b=(0,n.useRef)([]);return(0,n.useEffect)(()=>{if(a)return;if(b.current.forEach(e=>e()),b.current=[],!s){l([]),h([]),v([]),k([]),x(!1);return}x(!0);let e=s.uid,t=0,r=()=>{++t>=4&&x(!1)},n=(0,c.cf)((0,c.IO)((0,c.hJ)(i.db,"users",e,"tasks"),(0,c.Xo)("createdAt","desc")),e=>{l(e.docs.map(e=>({id:e.id,...e.data()}))),r()},()=>r()),u=(0,c.cf)((0,c.hJ)(i.db,"users",e,"lists"),e=>{h(e.docs.map(e=>({id:e.id,...e.data()}))),r()},()=>r()),d=(0,c.cf)((0,c.IO)((0,c.hJ)(i.db,"users",e,"notes"),(0,c.Xo)("createdAt","desc")),e=>{v(e.docs.map(e=>({id:e.id,...e.data()}))),r()},()=>r()),o=(0,c.cf)((0,c.hJ)(i.db,"users",e,"folders"),e=>{k(e.docs.map(e=>({id:e.id,...e.data()}))),r()},()=>r());return b.current=[n,u,d,o],()=>{b.current.forEach(e=>e()),b.current=[]}},[s,a]),(0,r.jsx)(d.Provider,{value:{tasks:o,lists:f,notes:m,folders:g,loading:E},children:t})}function o(){return(0,n.useContext)(d)}},8574:function(e,t,s){"use strict";s.d(t,{F:function(){return o},f:function(){return a}});var r=s(7573),n=s(7653),c=s(4193),i=s(6921);let u=(0,n.createContext)({theme:"system",setTheme:()=>{}});function d(e){let t=document.documentElement;if("light"===e)t.classList.add("light"),t.classList.remove("dark");else if("dark"===e)t.classList.add("dark"),t.classList.remove("light");else{let e=window.matchMedia("(prefers-color-scheme: dark)").matches;t.classList.toggle("dark",e),t.classList.toggle("light",!e)}}function a(e){let{children:t}=e,{user:s}=(0,c.a)(),[a,o]=(0,n.useState)("system");return(0,n.useEffect)(()=>{s&&(0,i.nS)(s.uid).then(e=>{o(e.theme),d(e.theme)})},[s]),(0,n.useEffect)(()=>{if("system"!==a)return;let e=window.matchMedia("(prefers-color-scheme: dark)"),t=()=>d("system");return e.addEventListener("change",t),()=>e.removeEventListener("change",t)},[a]),(0,r.jsx)(u.Provider,{value:{theme:a,setTheme:e=>{o(e),d(e),s&&(0,i.d2)(s.uid,{theme:e})}},children:t})}let o=()=>(0,n.useContext)(u)},5646:function(){}},function(e){e.O(0,[490,301,787,226,937,293,528,744],function(){return e(e.s=971)}),_N_E=e.O()}]);